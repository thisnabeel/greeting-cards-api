!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(e.FroalaEditor)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e["default"]:e,Object.assign(e.DEFAULTS,{saveInterval:1e4,saveURL:null,saveParams:{},saveParam:"body",saveMethod:"POST"}),e.PLUGINS.save=function(i){function f(e,t){i.events.trigger("save.error",[{code:e,message:o[e]},t])}function t(e){void 0===e&&(e=i.html.get());var t=e,s=i.events.trigger("save.before",[e]);if(!1===s)return!1;if("string"==typeof s&&(e=s),i.opts.saveURL){var n={};for(var a in i.opts.saveParams)if(i.opts.saveParams.hasOwnProperty(a)){var o=i.opts.saveParams[a];n[a]="function"==typeof o?o.call(this):o}var r={};r[i.opts.saveParam]=e,l(this).ajax({method:i.opts.saveMethod,url:i.opts.saveURL,data:Object.assign(r,n),crossDomain:i.opts.requestWithCORS,withCredentials:i.opts.requestWithCredentials,headers:i.opts.requestHeaders,done:function(e){v=t,i.events.trigger("save.after",[e])},fail:function(e){f(u,e.response||e.responseText)}})}else f(c)}function n(){clearTimeout(a),a=setTimeout(function(){var e=i.html.get();(v!=e||s)&&(s=!1,t(v=e))},0)}var l=i.$,a=null,v=null,s=!1,c=1,u=2,o={};return o[c]="Missing saveURL option.",o[u]="Something went wrong during save.",{_init:function r(){if(i.opts.letteringClass)for(var e=i.opts.letteringClass,t=i.$el.find(".".concat(e)).length,s=0;s<t;s++)i.$el.find(".".concat(e))[s].innerHTML=i.$el.find(".".concat(e))[s].innerText.replace(/([\w'-]+|[?.",])/g,"<span class = 'fr-word-select'>$1</span>");i.opts.saveInterval&&(v=i.html.get(),i.events.on("contentChanged",function(){setTimeout(n,i.opts.saveInterval)}),i.events.on("keydown destroy",function(){clearTimeout(a)}))},save:t,reset:function e(){n(),s=!1},force:function d(){s=!0}}},e.DefineIcon("save",{NAME:"floppy-o",FA5NAME:"save"}),e.RegisterCommand("save",{title:"Save",undo:!1,focus:!1,refreshAfterCallback:!1,callback:function(){this.save.save()},plugin:"save"})});