!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("froala-editor")):"function"==typeof define&&define.amd?define(["froala-editor"],t):t(e.FroalaEditor)}(this,function(_t){"use strict";function St(e){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}_t=_t&&_t.hasOwnProperty("default")?_t["default"]:_t,Object.assign(_t.POPUP_TEMPLATES,{"filesManager.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_EMBED_LAYER_][_UPLOAD_PROGRESS_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),Object.assign(_t.DEFAULTS,{filesInsertButtons:["imageBack","|","filesUpload","filesByURL","filesEmbed"],filesInsertButtons2:["deleteAll","insertAll","cancel","minimize"],imageEditButtons:["imageReplace","imageAlign","imageCaption","imageRemove","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUpload:!0,filesManagerUploadURL:null,imageCORSProxy:"https://cors-anywhere.froala.com",imageUploadRemoteUrls:!0,filesManagerUploadParam:"file",filesManagerUploadParams:{},googleOptions:{},filesManagerUploadToS3:!1,filesManagerUploadToAzure:!1,filesManagerUploadMethod:"POST",filesManagerMaxSize:10485760,filesManagerAllowedTypes:["*"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered","fr-shadow":"Shadow"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5,imageAddNewLine:!1}),_t.VIDEO_PROVIDERS=[{test_regex:/^.*((youtu.be)|(youtube.com))\/((v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))?\??v?=?([^#\&\?]*).*/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:m\.)?(?:youtube\.com|youtu\.be)\/(?:watch\?v=|embed\/)?([0-9a-zA-Z_\-]+)(.+)?/g,url_text:"https://www.youtube.com/embed/$1?$2",html:'<iframe width="640" height="360" src="{url}&wmode=opaque" frameborder="0" allowfullscreen></iframe>',provider:"youtube"},{test_regex:/^.*(?:vimeo.com)\/(?:channels(\/\w+\/)?|groups\/*\/videos\/\u200b\d+\/|video\/|)(\d+)(?:$|\/|\?)/,url_regex:/(?:https?:\/\/)?(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/(?:[^\/]*)\/videos\/|album\/(?:\d+)\/video\/|video\/|)(\d+)(?:[a-zA-Z0-9_\-]+)?(\/[a-zA-Z0-9_\-]+)?/i,url_text:"https://player.vimeo.com/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vimeo"},{test_regex:/^.+(dailymotion.com|dai.ly)\/(video|hub)?\/?([^_]+)[^#]*(#video=([^_&]+))?/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:dailymotion\.com|dai\.ly)\/(?:video|hub)?\/?(.+)/g,url_text:"https://www.dailymotion.com/embed/video/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"dailymotion"},{test_regex:/^.+(screen.yahoo.com)\/[^_&]+/,url_regex:"",url_text:"",html:'<iframe width="640" height="360" src="{url}?format=embed" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"yahoo"},{test_regex:/^.+(rutube.ru)\/[^_&]+/,url_regex:/(?:https?:\/\/)?(?:www\.)?(?:rutube\.ru)\/(?:video)?\/?(.+)/g,url_text:"https://rutube.ru/play/embed/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowtransparency="true"></iframe>',provider:"rutube"},{test_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/,url_regex:/^(?:.+)vidyard.com\/(?:watch)?\/?([^.&/]+)\/?(?:[^_.&]+)?/g,url_text:"https://play.vidyard.com/$1",html:'<iframe width="640" height="360" src="{url}" frameborder="0" allowfullscreen></iframe>',provider:"vidyard"}],_t.VIDEO_EMBED_REGEX=/^\W*((<iframe(.|\n)*>(\s|\n)*<\/iframe>)|(<embed(.|\n)*>))\W*$/i,_t.IMAGE_EMBED_REGEX=/^\W*((<img(.|\n)*>(\s|\n)*))\W*$/i,_t.PLUGINS.filesManager=function(A){function g(){var e=A.popups.get("filesManager.insert"),t=e.find(".fr-files-by-url-layer input");t.val(""),e.find(".fr-files-embed-layer textarea").val("").trigger("change"),t.trigger("change")}function f(e){var t;A.hasOwnProperty("imageTUI")||(ke="fr-disabled"),Oe.forEach(function(e,t){h(t)}),o()?(t=A.popups.get("filesManager.insert"))||(t=q()):(t=A.popups.get("filesManager.insert"))||(t=function s(){var e={buttons:'<div class="fr-buttons fr-tabs">'.concat(A.button.buildList(A.opts.fileInsertButtons),"</div>"),upload_layer:"<div style= 'padding:10px'>\n    <div class = 'fr-message'><h3 style ='font-size: 16px; margin: 10px 10px;font-weight: normal;'>".concat(A.language.translate(function n(){var e="",t=function i(){var t=[];return Ke.forEach(function(e){A.opts.pluginsEnabled.indexOf(e)<0&&t.push(e.charAt(0).toUpperCase()+e.slice(1))}),t}();return e=t.join(", "),1<t.length?e+=" plugin are":e+=" plugin is",e}()+" not enabled. Do you want to enable?"),"</h3></div>\n    <div style='text-align:right;'>\n      <button class='fr-trim-button fr-plugins-enable'>").concat(A.language.translate("Enable"),"</button>               \n      <button class='fr-trim-button fr-plugins-cancel'>").concat(A.language.translate("Cancel"),"</button>\n    </div>"),by_url_layer:"",embed_layer:"",upload_progress_layer:"",progress_bar:""},t=A.popups.create("filesManager.insert",e);return V(t),t}());var i=A.$tb.find('.fr-command[data-cmd="insertFiles"]');if(w(),e||!t.hasClass("fr-active"))if(e||b(),A.popups.refresh("filesManager.insert"),A.popups.setContainer("filesManager.insert",A.$tb),i.isVisible()){var n=A.button.getPosition(i,Be.size),a=n.left,r=n.top;A.popups.show("filesManager.insert",a,r,i.outerHeight())}else A.position.forSelection(t),A.popups.show("filesManager.insert");A.popups.setPopupDimensions(t),o()&&A.popups.setFileListHeight(t),t.find(".fr-upload-progress")&&0==Be.size&&t.find(".fr-upload-progress").addClass("fr-none")}function o(){var t=!0;return Ke.forEach(function(e){A.opts.pluginsEnabled.indexOf(e)<0&&(t=!1)}),t}function u(){w()}function l(){if(Ee||function s(){var e;if(A.shared.$image_resizer?(Ee=A.shared.$image_resizer,Ae=A.shared.$img_overlay,A.events.on("destroy",function(){Le("body").first().append(Ee.removeClass("fr-active"))},!0)):(A.shared.$image_resizer=Le(document.createElement("div")).attr("class","fr-image-resizer"),Ee=A.shared.$image_resizer,A.events.$on(Ee,"mousedown",function(e){e.stopPropagation()},!0),A.opts.imageResize&&(Ee.append(d("nw")+d("ne")+d("sw")+d("se")),A.shared.$img_overlay=Le(document.createElement("div")).attr("class","fr-image-overlay"),Ae=A.shared.$img_overlay,e=Ee.get(0).ownerDocument,Le(e).find("body").first().append(Ae))),A.events.on("shared.destroy",function(){Ee.html("").removeData().remove(),Ee=null,A.opts.imageResize&&(Ae.remove(),Ae=null)},!0),A.helpers.isMobile()||A.events.$on(Le(A.o_win),"resize",function(){we&&!we.hasClass("fr-uploading")?ge(!0):we&&(l(),replace(),y(!1))}),A.opts.imageResize){e=Ee.get(0).ownerDocument,A.events.$on(Ee,A._mousedown,".fr-handler",p),A.events.$on(Le(e),A._mousemove,m),A.events.$on(Le(e.defaultView||e.parentWindow),A._mouseup,v),A.events.$on(Ae,"mouseleave",v);var n=1,a=null,r=0;A.events.on("keydown",function(e){if(we){var t=-1!=navigator.userAgent.indexOf("Mac OS X")?e.metaKey:e.ctrlKey,i=e.which;(i!==a||200<e.timeStamp-r)&&(n=1),(i==_t.KEYCODE.EQUALS||A.browser.mozilla&&i==_t.KEYCODE.FF_EQUALS)&&t&&!e.altKey?n=ae.call(this,e,1,1,n):(i==_t.KEYCODE.HYPHEN||A.browser.mozilla&&i==_t.KEYCODE.FF_HYPHEN)&&t&&!e.altKey?n=ae.call(this,e,2,-1,n):A.keys.ctrlKey(e)||i!=_t.KEYCODE.ENTER||(we.before("<br>"),U(we)),a=i,r=e.timeStamp}},!0),A.events.on("keyup",function(){n=1})}}(),!we)return!1;var e=A.$wp||A.$sc;e.append(Ee),Ee.data("instance",A);var t=e.scrollTop()-("static"!=e.css("position")?e.offset().top:0),i=e.scrollLeft()-("static"!=e.css("position")?e.offset().left:0);i-=A.helpers.getPX(e.css("border-left-width")),t-=A.helpers.getPX(e.css("border-top-width")),A.$el.is("img")&&A.$sc.is("body")&&(i=t=0);var n=be();ye()&&(n=n.find(".fr-img-wrap"));var a=0,r=0;A.opts.iframe&&(a=A.helpers.getPX(A.$wp.find(".fr-iframe").css("padding-top")),r=A.helpers.getPX(A.$wp.find(".fr-iframe").css("padding-left"))),Ee.css("top",(A.opts.iframe?n.offset().top+a:n.offset().top+t)-1).css("left",(A.opts.iframe?n.offset().left+r:n.offset().left+i)-1).css("width",n.get(0).getBoundingClientRect().width).css("height",n.get(0).getBoundingClientRect().height).addClass("fr-active")}function d(e){return'<div class="fr-handler fr-h'.concat(e,'"></div>')}function c(e){ye()?we.parents(".fr-img-caption").css("width",e):we.css("width",e)}function p(e){if(!A.core.sameInstance(Ee))return!0;if(e.preventDefault(),e.stopPropagation(),A.$el.find("img.fr-error").left)return!1;A.undo.canDo()||A.undo.saveStep();var t=e.pageX||e.originalEvent.touches[0].pageX;if("mousedown"==e.type){var i=A.$oel.get(0).ownerDocument,n=i.defaultView||i.parentWindow,a=!1;try{a=n.location!=n.parent.location&&!(n.$&&n.$.FE)}catch(ke){}a&&n.frameElement&&(t+=A.helpers.getPX(Le(n.frameElement).offset().left)+n.frameElement.clientLeft)}(Ce=Le(this)).data("start-x",t),Ce.data("start-width",we.width()),Ce.data("start-height",we.height());var r=we.width();if(A.opts.imageResizeWithPercent){var s=we.parentsUntil(A.$el,A.html.blockTagsQuery()).get(0)||A.el;r=(r/Le(s).outerWidth()*100).toFixed(2)+"%"}c(r),Ae.show(),A.popups.hideAll(),me()}function m(e){if(!A.core.sameInstance(Ee))return!0;var t;if(Ce&&we){if(e.preventDefault(),A.$el.find("img.fr-error").left)return!1;var i=e.pageX||(e.originalEvent.touches?e.originalEvent.touches[0].pageX:null);if(!i)return!1;var n=i-Ce.data("start-x"),a=Ce.data("start-width");if((Ce.hasClass("fr-hnw")||Ce.hasClass("fr-hsw"))&&(n=0-n),A.opts.imageResizeWithPercent){var r=we.parentsUntil(A.$el,A.html.blockTagsQuery()).get(0)||A.el;a=((a+n)/Le(r).outerWidth()*100).toFixed(2),A.opts.imageRoundPercent&&(a=Math.round(a)),c("".concat(a,"%")),(t=ye()?(A.helpers.getPX(we.parents(".fr-img-caption").css("width"))/Le(r).outerWidth()*100).toFixed(2):(A.helpers.getPX(we.css("width"))/Le(r).outerWidth()*100).toFixed(2))===a||A.opts.imageRoundPercent||c("".concat(t,"%")),we.css("height","").removeAttr("height")}else a+n>=A.opts.imageMinWidth&&(c(a+n),t=ye()?A.helpers.getPX(we.parents(".fr-img-caption").css("width")):A.helpers.getPX(we.css("width"))),t!==a+n&&c(t),((we.attr("style")||"").match(/(^height:)|(; *height:)/)||we.attr("height"))&&(we.css("height",Ce.data("start-height")*we.width()/Ce.data("start-width")),we.removeAttr("height"));l(),A.events.trigger("image.resize",[he()])}}function v(e){if(!A.core.sameInstance(Ee))return!0;if(Ce&&we){if(e&&e.stopPropagation(),A.$el.find("img.fr-error").left)return!1;Ce=null,Ae.hide(),l(),A.undo.saveStep(),A.events.trigger("image.resizeEnd",[he()])}else Ee.removeClass("fr-active")}function a(){Oe.forEach(function(e,t){var i=A.popups.get("filesManager.insert");i.find(".fr-checkbox-file-"+t).get(0).disabled=!0,document.getElementById("fr-file-autoplay-button-"+t)&&(document.getElementById("fr-file-autoplay-button-"+t).disabled=!0,document.getElementById("fr-file-autoplay-button-"+t).parentElement.classList.add("fr-checkbox-disabled"),document.getElementById("fr-file-autoplay-button-"+t).parentElement.classList.remove("fr-files-checkbox")),i.find(".fr-checkbox-"+t).get(0).classList.remove("fr-files-checkbox"),i.find(".fr-checkbox-"+t).get(0).classList.add("fr-checkbox-disabled")})}function k(e,t,i,n){A.edit.on(),we&&we.addClass("fr-error"),Je[e]?(e!=We&&e!=Ye&&e!=Ge||B(100,n,!0),Oe.set(n,Je[e]),a(),function Pe(){Oe.forEach(function(e,t){A.popups.get("filesManager.insert"),document.getElementById("fr-file-edit-button-".concat(t))&&(document.getElementById("fr-file-edit-button-".concat(t)).classList.add("fr-disabled"),document.getElementById("fr-file-view-button-".concat(t)).classList.add("fr-disabled"),document.getElementById("fr-file-insert-button-".concat(t)).classList.add("fr-disabled"))})}(),r(A.language.translate(Je[e]),n)):r(A.language.translate("Something went wrong. Please try again."),n),!we&&i&&re(i),A.events.trigger("filesManager.error",[{code:e,message:Je[e]},t,i])}function I(){var e=A.popups.get("filesManager.insert"),t=e.find('.fr-command[data-cmd="insertAll"]'),i=e.find('.fr-command[data-cmd="deleteAll"]'),n=!0;ze.forEach(function Pe(t,i){ze.get(i)&&(n=!1)}),n?t.addClass("fr-disabled"):t.removeClass("fr-disabled"),n?i.addClass("fr-disabled"):i.removeClass("fr-disabled")}function h(e){Re.get(e)&&Re.get(e).link&&A.events.trigger("filesManager.removed",[Re.get(e).link]);var t=A.popups.get("filesManager.insert");t.find(".fr-file-"+e).get(0)!==undefined&&(t.find(".fr-file-"+e).get(0).outerHTML=""),Re["delete"](e),Be["delete"](e),ze["delete"](e),I(),0==Be.size&&(He=0),Oe["delete"](e),A.popups.setPopupDimensions(t,!0),A.opts.toolbarBottom?f(!0):A.popups.setPopupDimensions(t),t.find(".fr-upload-progress")&&0==Be.size&&t.find(".fr-upload-progress").addClass("fr-none")}function b(){for(var e=A.popups.get("filesManager.insert"),t=e.find(".fr-insert-checkbox"),i=0;i<t.length;i++)t.get(i).children.target.checked=!1,e.find(".fr-file-"+t.get(i).id.split("-").pop()).get(0).classList.add("fr-unchecked");if(Me)document.getElementById("fr-file-autoplay-button-".concat(Me))&&(document.getElementById("fr-file-autoplay-button-".concat(Me)).checked=!1),Fe=Fe.filter(function(e){return e!=Me});else{for(var n=e.find(".fr-file-autoplay-button"),a=0;a<n.length;a++)n.get(a).checked=!1;Fe=[]}ze=new Map,I()}function y(e){var t=A.popups.get("filesManager.insert");if(t||(t=q()),t.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),t.find(".fr-files-progress-bar-layer").addClass("fr-active"),t.find(".fr-buttons").hide(),we){var i=be();A.popups.setContainer("filesManager.insert",A.$sc);var n=i.offset().left,a=i.offset().top+i.height();A.popups.show("filesManager.insert",n,a,i.outerHeight())}void 0===e&&L(A.language.translate("Uploading"),0)}function w(e){var t=A.popups.get("filesManager.insert");if(t&&(t.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),t.find(".fr-files-progress-bar-layer").removeClass("fr-active"),t.find(".fr-buttons").show(),e||A.$el.find("img.fr-error").length)){if(A.events.focus(),A.$el.find("img.fr-error").length&&(A.$el.find("img.fr-error").remove(),A.undo.saveStep(),A.undo.run(),A.undo.dropRedo()),!A.$wp&&we){var i=we;ge(!0),A.selection.setAfter(i.get(0)),A.selection.restore()}A.popups.hide("filesManager.insert")}}function L(e,t){var i=A.popups.get("filesManager.insert");if(i){var n=i.find(".fr-files-progress-bar-layer");n.find("h3").text(e+(t?" ".concat(t,"%"):"")),n.removeClass("fr-error"),t?(n.find("div").removeClass("fr-indeterminate"),n.find("div > span").css("width","".concat(t,"%"))):n.find("div").addClass("fr-indeterminate")}}function s(e){y();var t=A.popups.get("filesManager.insert").find(".fr-files-progress-bar-layer");t.addClass("fr-error");var i=t.find("h3");i.text(e),A.events.disableBlur(),i.focus()}function r(e,t){var i=A.popups.get("filesManager.insert"),n=i.find(".fr-upload-progress-layer"),a=i.find(".fr-file-".concat(t));n.addClass("fr-error"),a.find("h5").text(e)}function x(e){dt=e,Qe=document.getElementsByClassName(e),Array.prototype.map.call(Qe,function(e){!function rt(t){(t.addEventListener("dragover",function(e){e.preventDefault(),e.stopPropagation(),et=e.pageX,tt=e.pageY;var t=document.getElementById("filesList");tt+20>t.getBoundingClientRect().bottom&&M(t,0,10),tt-20<t.getBoundingClientRect().top&&M(t,0,-10)},!1),A.helpers.isMobile())&&t.getElementsByClassName("dot")[0].addEventListener("touchmove",function(e){e.preventDefault(),e.stopPropagation();for(var t=e.target;t&&!t.classList.contains(dt);)t=t.parentElement;for(var i=document.elementFromPoint(e.targetTouches[0].clientX,e.targetTouches[0].clientY);i&&!i.classList.contains(dt);)i=i.parentElement;var n=document.getElementsByClassName("fr-hovered-over-file");Array.prototype.forEach.call(n,function(e){e.classList.remove("fr-hovered-over-file")}),i&&!t.classList.contains("fr-unchecked")&&i.classList.add("fr-hovered-over-file");var a=document.getElementById("filesList");e.targetTouches[0].clientY+5>a.getBoundingClientRect().bottom&&M(a,0,5),e.targetTouches[0].clientY-5<a.getBoundingClientRect().top&&M(a,0,-5)},!1);if(t.ondrag=n,t.ondragend=E,A.helpers.isMobile()){var i=t.getElementsByClassName("dot");i[0].addEventListener("touchmove",n,!1),i[0].addEventListener("touchend",E,!1)}}(e)})}function M(e,t,i){e.scrollLeft+=t,e.scrollTop+=i}function n(e){for(A.helpers.isMobile()&&(nt=event.touches[0].clientX,at=event.touches[0].clientY),it=e.target;!it.classList.contains(dt);)it=it.parentElement;it.classList.contains(dt)&&!it.classList.contains("fr-unchecked")?A.helpers.isMobile()&&it.classList.add("drag-sort-active"):it=undefined}function E(){var e;if(it!==undefined){var t,i;if(A.helpers.isMobile())for(t=nt,i=at,e=event.target;!e.classList.contains(dt);)e=e.parentElement;else t=event.clientX,i=event.clientY;A.helpers.isMobile()||!A.browser.safari&&!A.browser.mozilla||(t=et,i=tt);for(var n=document.elementFromPoint(t,i);n&&!n.classList.contains(dt);)n=n.parentElement;n&&!n.classList.contains(dt)?n=undefined:n&&it!==n&&function o(e,t){var i,n,a=e.parentNode,r=t.parentNode;if(a&&r&&!a.isEqualNode(t)&&!r.isEqualNode(e)){for(var s=0;s<a.children.length;s++)a.children[s].isEqualNode(e)&&(i=s);for(s=0;s<r.children.length;s++)r.children[s].isEqualNode(t)&&(n=s);a.isEqualNode(r)&&i<n&&n++,a.insertBefore(t,a.children[i]),r.insertBefore(e,r.children[n])}}(it,n),A.helpers.isMobile()&&(e.classList.remove("fr-hovered-over-file"),n.classList.remove("fr-hovered-over-file"))}}function C(e){var n=A.popups.get("filesManager.insert");n.find(".fr-upload-progress-layer").hasClass("fr-active")||n.find(".fr-upload-progress-layer").addClass("fr-active"),n.find(".fr-upload-progress").removeClass("fr-none");var t=Be.get(e),i=function s(e){var t,i={weekday:"long",year:"numeric",month:"long",day:"numeric"};try{t=e.toLocaleDateString(A.opts.language?A.opts.language:undefined,i)}catch(n){t=e.toLocaleDateString(undefined,i)}return t+""}(new Date),a=ze.get(e)?"":"fr-unchecked ",r="\n        <div id='fr-file-".concat(e,"' class='fr-file-list-item fr-file-").concat(e," ").concat(a,"' draggable = \"").concat(!a,'" >\n        <div class=\'fr-file-item-left\' >\n\n    \n            <div class="fr-file-item-insert-checkbox fr-files-checkbox-line">\n            ').concat(A.helpers.isMobile()?"<div id='fr-pick-".concat(e,"}' class='dot'>\n            </div>"):"",'\n            <div id="checkbox-key-').concat(e,'" class="fr-files-checkbox fr-insert-checkbox  fr-checkbox-').concat(e,'">\n            <input name="target" class="fr-insert-attr fr-checkbox-file-').concat(e,' fr-file-insert-check" data-cmd="fileInsertCheckbox"\n             data-checked="_blank" type="checkbox" id="fr-link-target-').concat(A.id,'" tabIndex="0" />\n            <span>').concat('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>','\n            </span>\n        </div>\n                <label id="fr-label-target-').concat(A.id,"\"></label>\n            </div>\n    \n            <div class='fr-file-item-icon fr-file-item-icon-").concat(e,"' >\n                <img src='https://secure.webtoolhub.com/static/resources/icons/set112/f2afb6f7.png' alt='Image preview' class='thumbnail-padding' height='36px' width='36px' />\n            </div>\n\n            <div class='fr-file-item-description' >\n                <div class='fr-file-name fr-files-manager-tooltip'>\n                   ").concat(function o(e,t,i){return null==t&&(t=100),null==i&&(i="..."),e.length>t?e.substring(0,t-i.length)+i:e}(t.name,20),'\n                      <span class="').concat(20<t.name.length?"tooltiptext":"fr-none",'">').concat(t.name,"\n                      </span>\n                 </div>\n                 <div class='fr-file-details'>\n                 <div class='fr-file-date'>").concat(i,"\n                 </div>\n \n                 <div class='fr-file-size'>\n                     ").concat(function l(e){if(0==e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return" | "+1*(e/Math.pow(1024,t)).toFixed(2)+" "+["Bytes","KB","MB","GB","TB"][t]}(t.size),"\n                 </div>\n                 </div>\n\n                  <div class='fr-file-error'>\n                    <h5 class='fr-file-error-h5'></h5>\n                 </div>\n             </div>\n    \n        </div>\n\n        <div class='fr-file-item-right fr-file-item-right-").concat(e,"'>")+T(e)+"</div>\n    </div>";n.find(".fr-upload-progress-layer")[0].innerHTML=r+n.find(".fr-upload-progress-layer")[0].innerHTML,Be.forEach(function d(e,t){ze.get(t)&&n.find("input.fr-insert-attr.fr-checkbox-file-".concat(t))[0].setAttribute("checked",null)}),Fe.forEach(function(e){document.getElementById("fr-file-autoplay-button-"+e).checked=!0}),S(e,t),w(),A.opts.toolbarBottom?f(!0):A.popups.setPopupDimensions(n),x("fr-file-list-item")}function _(e){switch(e){case"application/msword":return A.icon.getFileIcon("docIcon");case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":return A.icon.getFileIcon("docxIcon");case"image/gif":return A.icon.getFileIcon("gifIcon");case"image/jpeg":return A.icon.getFileIcon("jpegIcon");case"image/jpeg":return A.icon.getFileIcon("jpgIcon");case"type/text":return A.icon.getFileIcon("logIcon");case"video/quicktime":return A.icon.getFileIcon("movIcon");case"audio/mp3":case"audio/mpeg":return A.icon.getFileIcon("mp3Icon");case"video/mp4":return A.icon.getFileIcon("mp4Icon");case"audio/ogg":return A.icon.getFileIcon("oggIcon");case"video/ogg":return A.icon.getFileIcon("ogvIcon");case"application/pdf":return A.icon.getFileIcon("pdfIcon");case"image/png":return A.icon.getFileIcon("pngIcon");case"text/plain":return A.icon.getFileIcon("txtIcon");case"video/webm":return A.icon.getFileIcon("webmIcon");case"image/webp":return A.icon.getFileIcon("webpIcon");case"video/x-ms-wmv":return A.icon.getFileIcon("wmvIcon");case"application/vnd.ms-excel":return A.icon.getFileIcon("xlsIcon");case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":return A.icon.getFileIcon("xlsxIcon");case"application/x-zip-compressed":case"application/zip":return A.icon.getFileIcon("zipIcon");default:return A.icon.getFileIcon("defaultIcon")}}function S(n,a,e){var r=A.popups.get("filesManager.insert"),t=r.find(".fr-file-item-icon-"+n).get(0);if(Y(P(a))&&"image/gif"!=P(a)&&"image/webp"!=P(a)){"a"!=t.children[0].localName&&(t.innerHTML="<a target='_blank' href=''>"+t.innerHTML+"</a>"),r.find(".fr-file-item-icon-"+n).get(0).children[0].children[0];var s=new FileReader;if(null!=e&&e){var i=Be.get(n);a.name=i.name,Be.set(n,a)}if(s.onloadend=function(){r.find(".fr-file-item-icon-"+n).get(0).children[0].children[0].src=s.result;for(var e=atob(s.result.split(",")[1]),t=[],i=0;i<e.length;i++)t.push(e.charCodeAt(i));r.find(".fr-file-item-icon-"+n).get(0).children[0].href=window.URL.createObjectURL(new Blob([new Uint8Array(t)],{type:P(a)})),r.find(".fr-file-item-icon-"+n).get(0).classList.add("file-item-thumbnail-hover")},a)s.readAsDataURL(a);else{var o=_(P(a));t.innerHTML='<svg height="40px" width="40px" viewBox="0 0 55 5" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n        '.concat(o.path,"\n        </svg>")}}else{var l=_(P(a));t.innerHTML='<svg height="40px" width="40px" viewBox="0 0 55 55" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      '.concat(l.path,"\n      </svg>")}}function T(e){var t="";if(G(P(Be.get(e)))){var i="fr-files-checkbox",n="";j(P(Be.get(e)))||(i="fr-checkbox-disabled",n="disabled"),t='\n      <div class="fr-files-checkbox-line align-autoplay">\n      <div id="checkbox-key-'.concat(e,'" class="').concat(i," fr-autoplay-checkbox  fr-checkbox-").concat(e,'">  \n                   \n      <input type="checkbox" id="fr-file-autoplay-button-').concat(e,'" class="fr-file-button-').concat(e,' fr-file-autoplay-button" data-title="Edit" data-param1="').concat(e,'" role="button" ').concat(n,"/>\n\n      <span>").concat('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="10" height="10" viewBox="0 0 32 32"><path d="M27 4l-15 15-7-7-5 5 12 12 20-20z" fill="#FFF"></path></svg>'," </span>\n      </div>      \n      <label  class='fr-autoplay-checkbox-label'>Autoplay </label>\n      </div>")}var a="application/msword",r="application/vnd.openxmlformats-officedocument.wordprocessingml.document",s="";return!X(P(Be.get(e)))&&j(P(Be.get(e)))||(ke="fr-disabled"),G(P(Be.get(e)))&&(ke="fr-disabled"),W(P(Be.get(e)))&&(ke="fr-disabled",P(Be.get(e))!=a&&P(Be.get(e))!=r||A.opts.googleOptions&&!A.helpers.isMobile()&&A.opts.googleOptions.API_KEY&&A.opts.googleOptions.CLIENT_ID&&(ke=""),"text/plain"!=P(Be.get(e))&&P(Be.get(e))!=a&&"application/pdf"!=P(Be.get(e))&&P(Be.get(e))!=r&&"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"!=P(Be.get(e))&&"application/vnd.ms-excel"!=P(Be.get(e))&&"type/text"!=P(Be.get(e))||(s="")),"video/url"===P(Be.get(e))&&(ke="fr-disabled"),t+'<div class=\'fr-file-item-action-buttons\' >\n                <button type="button" id="fr-file-insert-button-'.concat(e,'" class=" fr-doc-edit-').concat(e," fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n                fr-file-button-").concat(e," fr-file-insert-button-").concat(e,' fr-file-insert-button" data-cmd="imageInsertByUpload" data-title="Insert" data-param1="').concat(e,'" tabIndex="2" role="button">\n                <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "-5 0 28 28" xlmns = "http://w3.org/200/svg"><path d = \'M 9.25 12 L 6.75 12 C 6.335938 12 6 11.664062 6 11.25 L 6 6 L 3.257812 6 C 2.703125 6 2.425781 5.328125 2.820312 4.933594 L 7.570312 0.179688 C 7.804688 -0.0546875 8.191406 -0.0546875 8.425781 0.179688 L 13.179688 4.933594 C 13.574219 5.328125 13.296875 6 12.742188 6 L 10 6 L 10 11.25 C 10 11.664062 9.664062 12 9.25 12 Z M 16 11.75 L 16 15.25 C 16 15.664062 15.664062 16 15.25 16 L 0.75 16 C 0.335938 16 0 15.664062 0 15.25 L 0 11.75 C 0 11.335938 0.335938 11 0.75 11 L 5 11 L 5 11.25 C 5 12.214844 5.785156 13 6.75 13 L 9.25 13 C 10.214844 13 11 12.214844 11 11.25 L 11 11 L 15.25 11 C 15.664062 11 16 11.335938 16 11.75 Z M 12.125 14.5 C 12.125 14.15625 11.84375 13.875 11.5 13.875 C 11.15625 13.875 10.875 14.15625 10.875 14.5 C 10.875 14.84375 11.15625 15.125 11.5 15.125 C 11.84375 15.125 12.125 14.84375 12.125 14.5 Z M 14.125 14.5 C 14.125 14.15625 13.84375 13.875 13.5 13.875 C 13.15625 13.875 12.875 14.15625 12.875 14.5 C 12.875 14.84375 13.15625 15.125 13.5 15.125 C 13.84375 15.125 14.125 14.84375 14.125 14.5 Z M 14.125 14.5 \'></path></svg>\n                </button>\n\n                <button type="button" id="fr-file-edit-button-').concat(e,'" class=" fr-doc-edit-').concat(e," ").concat(ke," fr-img-icon fr-btn fr-command fr-submit \n                fr-file-action-icons fr-file-edit-button-").concat(e," fr-file-button-").concat(e,' fr-file-edit-button" data-cmd="editImage" data-title="Edit" data-param1="').concat(e,'" role="button">\n                <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "0 4 25 25" xlmns = "http://w3.org/200/svg"><path d = \'M17,11.2L12.8,7L5,14.8V19h4.2L17,11.2z M7,16.8v-1.5l5.6-5.6l1.4,1.5l-5.6,5.6H7z M13.5,6.3l0.7-0.7c0.8-0.8,2.1-0.8,2.8,0  c0,0,0,0,0,0L18.4,7c0.8,0.8,0.8,2,0,2.8l-0.7,0.7L13.5,6.3z\'></path></svg>\n                </button>\n                \n                <span class="fr-file-view-').concat(e,'"><button type="button" id="fr-file-view-button-').concat(e,'" class=" fr-doc-edit-').concat(e," ").concat(s," fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n                fr-file-view-button-").concat(e,' fr-file-view-button" data-cmd="viewImage" data-title="View" data-param1="').concat(e,'" tabIndex="2" role="button">\n                <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "15 19 21 21" xlmns = "http://w3.org/200/svg"> <path style="fill:none;stroke-width:0.9077;stroke-linecap:round;stroke-linejoin:round;stroke:rgb(0%,0%,0%);stroke-opacity:1;stroke-miterlimit:10;" d="M 19.086094 16.541466 C 16.185625 16.541466 14.318281 19.447115 14.318281 19.447115 L 14.318281 19.555288 C 14.318281 19.555288 16.176719 22.475962 19.077187 22.475962 C 21.977656 22.475962 23.847969 19.576322 23.847969 19.576322 L 23.847969 19.465144 C 23.847969 19.465144 21.989531 16.541466 19.086094 16.541466 Z M 19.07125 21.024639 C 18.248906 21.024639 17.583906 20.357572 17.583906 19.53726 C 17.583906 18.716947 18.248906 18.04988 19.07125 18.04988 C 19.890625 18.04988 20.555625 18.716947 20.555625 19.53726 C 20.555625 20.357572 19.890625 21.024639 19.07125 21.024639 Z M 19.07125 21.024639 " transform="matrix(1.315789,0,0,1.3,0,0)"/></svg></button></span>\n\n                <button type="button" id="fr-file-delete-button-').concat(e,'" class=" fr-doc-edit-').concat(e," fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons\n                fr-file-button-").concat(e,' fr-file-delete-button" data-cmd="deleteImage" data-title="Delete" data-param1="').concat(e,'" role="button">\n                <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "-2 3 30 30" xlmns = "http://w3.org/200/svg"><path d = \'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z\'></path></svg>\n                </button>\n                 \n            </div>\n            <div id="user_area-').concat(e,"\" style=\"display: none;\">\n            \n              <div id=\"file_container\"></div>\n\n              <div style='display:block;text-align: center; margin-left:50%; id='edit-file-loader' class='fr-file-loader'></div>\n\n          </div> \n            ")}function B(e,t,i){var n=A.popups.get("filesManager.insert");if(!i&&e<=100){n.find(".fr-checkbox-file-"+t).get(0).disabled=!0,n.find(".fr-checkbox-"+t).get(0).classList.remove("fr-files-checkbox"),n.find(".fr-checkbox-"+t).get(0).classList.add("fr-checkbox-disabled");var a=n.find(".fr-file-progress-circle-"+t),r=n.find(".fr-file-upload-percent-"+t);return 50<e?a.get(0).setAttribute("class","fr-file-progress-circle-"+t+" progress-circle p"+Math.floor(e)+" over50"):a.get(0).setAttribute("class","fr-file-progress-circle-"+t+" progress-circle p"+Math.floor(e)),r.get(0).innerHTML=Math.floor(e)+"%",void R(t,e,i)}i&&(n.find(".fr-checkbox-file-"+t).get(0).disabled=!1,n.find(".fr-checkbox-"+t).get(0).classList.remove("fr-checkbox-disabled"),n.find(".fr-checkbox-"+t).get(0).classList.add("fr-files-checkbox"),n.find(".fr-file-item-right-"+t).get(0).innerHTML=T(t),R(t,100,i))}function R(e,t,i){var n=A.popups.get("filesManager.insert");n.find(".fr-progress-bar").removeClass("fr-none").addClass("fr-display-block"),n.find(".fr-upload-progress").hasClass("fr-height-set")&&A.popups.setFileListHeight(n);var a=0;Ue.set(e,t),Ue.forEach(function(e){a+=e}),a/=Ue.size,100==t&&i&&$e++,n.find('.fr-command[data-cmd="filesUpload"]').addClass("fr-disabled"),n.find('.fr-command[data-cmd="filesByURL"]').addClass("fr-disabled"),n.find('.fr-command[data-cmd="filesEmbed"]').addClass("fr-disabled"),n.find(".fr-progress-bar").get(0).style.width=a+"%",$e==Ue.size&&(n.find(".fr-progress-bar").removeClass("fr-display-block").addClass("fr-none"),Ue=new Map,$e=0,n.find('.fr-command[data-cmd="filesUpload"]').removeClass("fr-disabled"),n.find('.fr-command[data-cmd="filesByURL"]').removeClass("fr-disabled"),n.find('.fr-command[data-cmd="filesEmbed"]').removeClass("fr-disabled"))}function D(i,n){w(),A.popups.get("filesManager.insert").find(".fr-upload-progress-layer").addClass("fr-active"),i.forEach(function(e,t){Y(P(e))&&A.opts.imageUploadRemoteUrls&&A.opts.imageCORSProxy&&A.opts.imageUpload?K(e,i,we,n[t]):Re.set(n[t],e)})}function U(e){e&&e.get&&function i(e){if("false"==Le(this).parents("[contenteditable]").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;if(
e&&"touchend"==e.type&&lt)return!0;if(e&&A.edit.isDisabled())return e.stopPropagation(),e.preventDefault(),!1;for(var t=0;t<_t.INSTANCES.length;t++)_t.INSTANCES[t]!=A&&_t.INSTANCES[t].events.trigger("image.hideResizer");A.toolbar.disable(),e&&(e.stopPropagation(),e.preventDefault()),A.helpers.isMobile()&&(A.events.disableBlur(),A.$el.blur(),A.events.enableBlur()),A.opts.iframe&&A.size.syncIframe(),we=Le(this),l(),A.browser.msie?(A.popups.areVisible()&&A.events.disableBlur(),A.win.getSelection&&(A.win.getSelection().removeAllRanges(),A.win.getSelection().addRange(A.doc.createRange()))):A.selection.clear(),A.helpers.isIOS()&&(A.events.disableBlur(),A.$el.blur()),A.button.bulkRefresh(),A.events.trigger("video.hideResizer")}.call(e.get(0))}function z(){var e=Le(this);e.removeClass("fr-uploading"),e.next().is("br")&&e.next().remove(),(0==Pe.length||0<Pe.length&&Pe.length==Ne)&&(Ie=e),"VIDEO"==e.get(0).tagName||"AUDIO"==e.get(0).tagName?A.selection.setAfter(e.parent()):A.selection.setAfter(e),A.undo.saveStep(),A.events.trigger("filesManager.loaded",[e]),$(Pe)}function O(){var e,t=Array.prototype.slice.call(A.el.querySelectorAll("video, .fr-video > *")),i=[];for(e=0;e<t.length;e++)i.push(t[e].getAttribute("src")),Le(t[e]).toggleClass("fr-draggable",A.opts.videoMove),""===t[e].getAttribute("class")&&t[e].removeAttribute("class"),""===t[e].getAttribute("style")&&t[e].removeAttribute("style");if(rt)for(e=0;e<rt.length;e++)i.indexOf(rt[e].getAttribute("src"))<0&&A.events.trigger("video.removed",[Le(rt[e])]);rt=t}function $(e){if(null!=e){if(0==e.length)return void(null!=Ie&&("VIDEO"==Ie.get(0).tagName?A.video._editVideo(Ie.parent()):"IMG"==Ie.get(0).tagName?A.image.edit(Ie):Ie.trigger("click"),A.toolbar.disable()));i(e.shift(),e)}}function t(e){var t=!1;if(G(P(Re.get(e))))A.trimVideoPlugin.trimVideo(Be.get(e),e,Be),t=!0;else if(Y(P(Re.get(e)))){var i=Re.get(e).link,n=A.o_doc.createElement("img");n.src=i,we=n,xe=e,A.imageTUI.launch(A,!1,e),t=!0}else if(W(P(Re.get(e)))){var a={apiKey:A.opts.googleOptions.API_KEY,clientId:A.opts.googleOptions.CLIENT_ID,authorizeButton:"authorize_button-".concat(e),signoutButton:"signout_button",userArea:"user_area-".concat(e),fileInput:"file_input",fileIndex:e,file:Be.get(e),fileContainer:"file_container",loadingText:"File is being uploaded...",events:{onInvalidFile:function(){},onError:function(){}}};ot=function f(c){function e(){gapi.client.init({apiKey:c.apiKey,clientId:c.clientId,discoveryDocs:n,scope:"https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.appdata"}).then(function(){gapi.auth2.getAuthInstance().isSignedIn.listen(t),t(gapi.auth2.getAuthInstance().isSignedIn.get()),function e(){!gapi.auth2.getAuthInstance().isSignedIn.get()||gapi.auth.getToken()!==undefined&&gapi.auth.getToken().access_token===undefined?Promise.resolve(gapi.auth2.getAuthInstance().signIn()).then(function(){i()}):i()}()},function(e){c.events.onError(e)})}function t(e){e&&(l.style.display="block")}function a(){var e=gapi.auth.getToken().access_token,t="https://docs.google.com/feeds/download/documents/export/Export?id="+o+"&format=docx&access_token="+e,i=new XMLHttpRequest;i.open("get",t),i.responseType="arraybuffer",i.onload=function(){var e=new Blob([new Uint8Array(this.response)],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}),t=Be.get(c.fileIndex);e.name=t.name,e.lastModified=t.lastModified,e.lastModifiedDate=t.lastModifiedDate,Be.set(c.fileIndex,e),A.filesManager.upload(e,Re,we,c.fileIndex),s()},i.send()}function i(){!function n(e){for(var t=document.getElementsByClassName("fr-doc-edit-".concat(e)),i=0;i<t.length;i++)t[i].setAttribute("disabled",!0),t[i].classList.add("fr-disabled")}(c.fileIndex);var e=c.file;e?function t(l,d){var f=new FileReader;f.readAsArrayBuffer(l),f.onload=function(){for(var e={title:l.name,mimeType:"application/vnd.google-apps.document"},t="",i=new Uint8Array(f.result),n=i.byteLength,a=0;a<n;a++)t+=String.fromCharCode(i[a]);var r=btoa(t),s=u+"Content-Type: application/json; charset=UTF-8\r\n\r\n"+JSON.stringify(e)+u+"Content-Type: application/octet-stream\r\nContent-Transfer-Encoding: base64\r\n\r\n"+r+m,o=gapi.client.request({path:"/upload/drive/v2/files",method:"POST",params:{uploadType:"multipart",fields:p},headers:{"Content-Type":'multipart/related; boundary="'+g+'"',"Content-Length":s.Length},body:s});d||(d=function(){}),o.execute(function(e){e.error?c.events.onError(e.error):d(e)})}}(e,r):c.events.onInvalidFile("File is not selected")}function r(e){o=e.id;var t="https://docs.google.com/document/d/"+e.id+"/edit",i=A.o_doc.body,n=A.o_doc.createElement("div");n.setAttribute("id","editDocContainer"),n.style.cssText="position: fixed; top: 0;left: 0;padding: 0;width: 100%;height: 100%;background: rgba(255,255,255,1);z-index: 9998;display:block",n.innerHTML='<div style="margin-top:25px; text-align:center"><label>Sign Out : </label><input type="checkbox" id ="markSignOut" role="button"/>  <button id="signout_button"  class="fr-trim-button" >Save </button> <button id="cancel_file_edit" class="fr-trim-button">Cancel</button></div>  <iframe title="Edit your file" frameBorder="0" width="100%" height="700px" src="'+t+'"></iframe>',i.appendChild(n),document.getElementById("signout_button").onclick=a,document.getElementById("cancel_file_edit").onclick=s}function s(){document.getElementById("markSignOut").checked&&gapi.auth2.getAuthInstance().signOut().then(function(){gapi.auth.getToken()&&(gapi.auth.getToken().access_token=undefined)});var e=document.getElementById("editDocContainer");e.parentNode.removeChild(e),document.getElementById("user_area-".concat(c.fileIndex))&&(document.getElementById("user_area-".concat(c.fileIndex)).style.display="none"),function n(e){for(var t=document.getElementsByClassName("fr-doc-edit-".concat(e)),i=0;i<t.length;i++)t[i].removeAttribute("disabled"),t[i].classList.remove("fr-disabled")}(c.fileIndex)}var o,n=["https://www.googleapis.com/discovery/v1/apis/drive/v2/rest"],p="id,title,mimeType,userPermission,editable,copyable,shared,fileSize",g="-------314159265358979323846",u="\r\n--"+g+"\r\n",m="\r\n--"+g+"--",l=(document.getElementById(c.authorizeButton),document.getElementById(c.userArea));c.events||(c.events={}),c.events.onInvalidFile=c.events.onInvalidFile||function(){},c.events.onError=c.events.onError||function(){};var d={handleClientLoad:function(){gapi.load("client:auth2",e)}};return d}(a),function r(e,t){var i=function i(e){var t=document.createElement("script");t.src=e,t.onload=function(){this.onload=function(){},ot.handleClientLoad()},t.onreadystatechange=function(){"complete"===this.readyState&&this.onload()},(document.getElementsByTagName("head")[0]||document.body).appendChild(t)};!function n(){0!=e.length?i(e.shift(),n):t&&t()}()}(["https://apis.google.com/js/api.js"],function(){})}t&&(Se=!0)}function P(e){if(""!=e.type)return e.type;var t,i=/(?:\.([^.]+))?$/.exec(e.name)[1];return[[".doc","application/msword"],[".docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],[".gif","image/gif"],[".jpeg","image/jpeg"],[".jpg","image/jpeg"],[".txt","text/plain"],[".log","type/text"],[".mov","video/quicktime"],[".mp3","audio/mpeg"],[".mp4","video/mp4"],[".ogg","audio/ogg"],[".ogv","video/ogg"],[".pdf","application/pdf"],[".png","image/png"],[".webm","video/webm"],[".webp","image/webp"],[".wmv","video/x-ms-wmv"],[".xls","application/vnd.ms-excel"],[".xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],[".zip","application/x-zip-compressed"]].forEach(function(e){e[0]==".".concat(i)&&(t=e[1])}),t}function i(o,e){if(W(P(Re.get(o)))||!j(P(Re.get(o)))){var t=Re.get(o).link,i=Re.get(o).text;!i&&Be.get(o)&&Be.get(o).name&&(i=Be.get(o).name);var n=Re.get(o).response;A.edit.on(),A.events.focus(!0),A.selection.restore(),A.opts.fileUseSelectedText&&A.selection.text().length&&(i=A.selection.text()),t.endsWith(".pdf")||t.endsWith(".txt")?N('<iframe src="'.concat(t,'" title="').concat(i,'" width="\u201d100%\u201d" height="\u201d100%\u201d" class="fr-file"></iframe>'),!0):A.html.insert('<a href="'.concat(t,'" target="_blank" id="fr-inserted-file" class="fr-file">').concat(i,"</a>"));var a=A.$el.find("#fr-inserted-file");a.removeAttr("id"),A.undo.saveStep(),function M(){var e,t=Array.prototype.slice.call(A.el.querySelectorAll("a.fr-file")),i=[];for(e=0;e<t.length;e++)i.push(t[e].getAttribute("href"));if(st)for(e=0;e<st.length;e++)i.indexOf(st[e].getAttribute("href"))<0&&A.events.trigger("file.unlink",[st[e]]);st=t}(),A.selection.clear(),A.selection.setAfter(a),A.events.trigger("file.inserted",[a,n]),$(e)}if(Y(P(Re.get(o)))&&j(P(Re.get(o)))){var s=Re.get(o).link,r=Re.get(o).sanitize,l=Re.get(o).data,d=Re.get(o).$existing_img,f=Re.get(o).response;d&&"string"==typeof d&&(d=A.$(d)),A.edit.off(),L(A.language.translate("Loading image")),r&&(s=A.helpers.sanitizeURL(s));var c=new Image;c.onload=function(){var e,t;if(d){A.undo.canDo()||d.hasClass("fr-uploading")||A.undo.saveStep();var i=d.data("fr-old-src");d.data("fr-image-pasted")&&(i=null),A.$wp?((e=d.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted")).off("load"),i&&d.attr("src",i),d.replaceWith(e)):e=d;for(var n=e.get(0).attributes,a=0;a<n.length;a++){var r=n[a];0===r.nodeName.indexOf("data-")&&e.removeAttr(r.nodeName)}if(void 0!==l)for(t in l)l.hasOwnProperty(t)&&"link"!=t&&e.attr("data-".concat(t),l[t]);e.on("load",z),e.attr("src",s),A.edit.on(),A.undo.saveStep(),A.events.disableBlur(),A.$el.blur(),A.events.trigger(i?"image.replaced":"image.inserted",[e,f])}else e=function o(e,t,i){var n,a=Le(document.createElement("img")).attr("src",e);if(t&&void 0!==t)for(n in t)t.hasOwnProperty(n)&&"link"!=n&&(" data-".concat(n,'="').concat(t[n],'"'),a.attr("data-".concat(n),t[n]));var r=A.opts.imageDefaultWidth;r&&"auto"!=r&&(r=A.opts.imageResizeWithPercent?"100%":"".concat(r,"px")),a.attr("style",r?"width: ".concat(r,";"):""),ve(a,A.opts.imageDefaultDisplay,A.opts.imageDefaultAlign),a.on("load",i),a.on("error",i),A.edit.on(),A.events.focus(!0),A.selection.restore(),A.undo.saveStep(),A.opts.imageSplitHTML?A.markers.split():A.markers.insert(),A.html.wrap();var s=A.$el.find(".fr-marker");return s.length?(s.parent().is("hr")&&s.parent().after(s),A.node.isLastSibling(s)&&s.parent().hasClass("fr-deletable")&&s.insertAfter(s.parent()),s.replaceWith(a)):A.$el.append(a),a}(s,l,z),A.undo.saveStep(),A.events.disableBlur(),A.$el.blur(),A.events.trigger("image.inserted",[e,f])},c.onerror=function(){k(Ve,null,null,o),$(e)},c.src=s}if((G(P(Re.get(o)))||X(P(Re.get(o))))&&j(P(Re.get(o))))if(Me=o,"video/url"==P(Re.get(o))){var p=!1;if(document.getElementById("fr-file-autoplay-button-"+o)!==undefined&&(p=document.getElementById("fr-file-autoplay-button-"+o).checked),p&&Re.get(o)!==undefined&&-1<Re.get(o).video.indexOf("iframe")&&Re.get(o).video.indexOf("autoplay=1")<0){var g=Re.get(o).video.substring(Re.get(o).video.indexOf("src")+3),u="&";(g=(g=g.substring(g.indexOf('"')+1)).substring(0,g.indexOf('"'))).indexOf("?")<0&&(u="?"),Re.get(o).video=Re.get(o).video.replace(g,g+=u+"autoplay=1")}else!p&&Re.get(o).video.indexOf(!1)&&(-1<Re.get(o).video.indexOf("&autoplay=1")&&(Re.get(o).video=Re.get(o).video.replace("&autoplay=1","")),-1<Re.get(o).video.indexOf("?autoplay=1")&&(Re.get(o).video=Re.get(o).video.replace("?autoplay=1","")));A.events.focus(!0),A.selection.restore(),A.html.insert('<span contenteditable="false" draggable="true" class="fr-jiv fr-video fr-deletable">'.concat(Re.get(o).video,"</span>"),!1,A.opts.videoSplitHTML),A.popups.hide("filesManager.insert");var m=A.$el.find(".fr-jiv");m.removeClass("fr-jiv"),m.toggleClass("fr-rv",A.opts.videoResponsive),function E(e,t,i){!A.opts.htmlUntouched&&A.opts.useClasses?(e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),e.addClass("fr-fv".concat(i[0]," fr-dv").concat(t[0]))):"inline"==t?(e.css({display:"inline-block"}),"center"==i?e.css({"float":"none"}):"left"==i?e.css({"float":"left"}):e.css({"float":"right"})):(e.css({display:"block",clear:"both"}),"left"==i?e.css({textAlign:"left"}):"right"==i?e.css({textAlign:"right"}):e.css({textAlign:"center"}))}(m,A.opts.videoDefaultDisplay,A.opts.videoDefaultAlign),m.toggleClass("fr-draggable",A.opts.videoMove),A.events.trigger("video.inserted",[m]),z.call(m)}else{var v=Re.get(o).link,h=Re.get(o).sanitize,b=Re.get(o).data,y=Re.get(o).$existing_img,w=Re.get(o).response;A.edit.off(),h&&(v=A.helpers.sanitizeURL(v)),function C(){var e,t;if(y){A.undo.canDo()||y.find("video").hasClass("fr-uploading")||A.undo.saveStep();var i=y.find("video").data("fr-old-src"),n=y.data("fr-replaced");y.data("fr-replaced",!1),A.$wp?((e=y.clone(!0)).find("video").removeData("fr-old-src").removeClass("fr-uploading"),e.find("video").off("canplay"),i&&y.find("video").attr("src",i),y.replaceWith(e)):e=y;for(var a=e.find("video").get(0).attributes,r=0;r<a.length;r++){var s=a[r];0===s.nodeName.indexOf("data-")&&e.find("video").removeAttr(s.nodeName)}if(void 0!==b)for(t in b)b.hasOwnProperty(t)&&"link"!=t&&e.find("video").attr("data-".concat(t),b[t]);e.find("video").on("canplay",z),e.find("video").attr("src",v),A.edit.on(),O(),A.undo.saveStep(),A.$el.blur(),A.events.trigger(n?"video.replaced":"video.inserted",[e,w])}else e=function p(e,t,i,n,a){var r,s="";if(t&&void 0!==t)for(r in t)t.hasOwnProperty(r)&&"link"!=r&&(s+=" data-".concat(r,'="').concat(t[r],'"'));var o,l=A.opts.videoDefaultWidth;if(l&&"auto"!=l&&(l="".concat(l,"px")),X(n))o=Le(document.createElement("span")).attr("contenteditable","false").attr("draggable","true").attr("class","fr-video fr-dv"+A.opts.videoDefaultDisplay[0]+("center"!=A.opts.videoDefaultAlign?" fr-fv"+A.opts.videoDefaultAlign[0]:"")).html('<audio src="'+e+'" '+s+" controls>"+A.language.translate("Your browser does not support HTML5 video.")+"</audio>");else{var d="";document.getElementById("fr-file-autoplay-button-"+a).checked&&(d="autoplay"),o=Le(document.createElement("span")).attr("contenteditable","false").attr("draggable","true").attr("class","fr-video fr-dv"+A.opts.videoDefaultDisplay[0]+("center"!=A.opts.videoDefaultAlign?" fr-fv"+A.opts.videoDefaultAlign[0]:"")).html('<video src="'+e+'" '+s+(l?' style="width: '+l+';" ':"")+d+"  controls>"+A.language.translate("Your browser does not support HTML5 video.")+"</video>")}o.toggleClass("fr-draggable",A.opts.videoMove),A.edit.on(),A.events.focus(!0),A.selection.restore(),A.undo.saveStep(),A.opts.videoSplitHTML?A.markers.split():A.markers.insert(),A.html.wrap();var f=A.$el.find(".fr-marker");A.node.isLastSibling(f)&&f.parent().hasClass("fr-deletable")&&f.insertAfter(f.parent()),f.replaceWith(o);var c="";return c=X(n)?"audio":"video",o.find(c).get(0).readyState>o.find(c).get(0).HAVE_FUTURE_DATA||A.helpers.isIOS()?i.call(o.find(c).get(0)):(o.find(c).on("canplaythrough load",i),o.find(c).on("error",i)),o}(v,b,z,P(Re.get(o)),o),O(),A.undo.saveStep(),A.events.trigger("video.inserted",[e,w])}()}A.popups.hide("filesManager.insert"),ze["delete"](o);var x=A.popups.get("filesManager.insert");x.find("input.fr-insert-attr.fr-checkbox-file-".concat(o))[0].checked=!1,x.find(".fr-file-"+o).get(0).classList.add("fr-unchecked"),I(),document.getElementById("fr-file-autoplay-button-"+o)&&(document.getElementById("fr-file-autoplay-button-"+o).checked=!1),Fe=Fe.filter(function(e){return e!=o})}function N(e,t){var i,n;_t.VIDEO_EMBED_REGEX.test(e)?(i="video",n=A.opts.videoSplitHTML):_t.IMAGE_EMBED_REGEX.test(e)&&(i="image",n=A.opts.imageSplitHTML),A.events.focus(!0),A.selection.restore();var a=!1;we&&(re(),a=!0),A.html.insert('<span id="fr-inserted-file" contenteditable="true" draggable="true" class="fr-'.concat(i,' fr-jiv fr-deletable">').concat(e,"</span>"),!1,n),A.popups.hide("filesManager.insert");var r=A.$el.find(".fr-jiv");r.removeClass("fr-jiv"),"video"==i&&(r.toggleClass("fr-rv",A.opts.videoResponsive),function s(e,t,i){!A.opts.htmlUntouched&&A.opts.useClasses?(e.removeClass("fr-fvl fr-fvr fr-dvb fr-dvi"),e.addClass("fr-fv".concat(i[0]," fr-dv").concat(t[0]))):"inline"==t?(e.css({display:"inline-block"}),"center"==i?e.css({"float":"none"}):"left"==i?e.css({"float":"left"}):e.css({"float":"right"})):(e.css({display:"block",clear:"both"}),"left"==i?e.css({textAlign:"left"}):"right"==i?e.css({textAlign:"right"}):e.css({textAlign:"center"}))}(r,A.opts.videoDefaultDisplay,A.opts.videoDefaultAlign),r.toggleClass("fr-draggable",A.opts.videoMove),A.events.trigger(a?"video.replaced":"video.inserted",[r])),"image"==i&&(ve(r,A.opts.imageDefaultDisplay,A.opts.imageDefaultAlign),r.find("img").removeClass("fr-dii"),r.find("img").addClass("fr-dib"),r.toggleClass("fr-draggable",A.opts.imageMove),A.events.trigger(a?"image.replaced":"image.inserted",[r])),t&&(Ie=r,A.selection.clear(),A.toolbar.disable(),A.video._editVideo(Ie))}function F(e,t){try{if(!1===A.events.trigger("filesManager.uploaded",[e],!0))return A.edit.on(),!1;var i=JSON.parse(e);return i.link?i:(k(Ye,e,null,t),!1)}catch(rt){return k(Ge,e,null,t),!1}}function H(e,t){try{var i=Le(e).find("Location").text(),n=Le(e).find("Key").text();return!1===A.events.trigger("filesManager.uploadedToS3",[i,n,e],!0)?(A.edit.on(),!1):i}catch(Pe){return k(Ge,e,null,t),!1}}function K(e,t,i,n){if(-1<Ze.indexOf(P(e))||!P(e))return k(je,null,null,n),!1;if(!1===A.events.trigger("filesManager.beforeUpload",[t]))return!1;if(!(null!==A.opts.filesManagerUploadURL&&A.opts.filesManagerUploadURL!=_e||A.opts.filesManagerUploadToS3||A.opts.filesManagerUploadToAzure))return function y(o,l,d){var f=new FileReader;f.onload=function(){var e=f.result;if(f.result.indexOf("svg+xml")<0){for(var t=atob(f.result.split(",")[1]),i=[],n=0;n<t.length;n++)i.push(t.charCodeAt(n));if(e=window.URL.createObjectURL(new Blob([new Uint8Array(i)],{type:P(l)})),Y(P(l))){var a={link:e,sanitize:!1,data:null,$existing_img:d,response:null,type:P(l)};Re.set(o,a)}if(W(P(l))){var r={link:e,text:l.name,response:null,type:P(l)};Re.set(o,r)}if(G(P(l))||X(P(l))){var s={link:e,sanitize:!1,data:null,$existing_img:d,type:P(l)};Re.set(o,s)}}},f.readAsDataURL(l)}(n,e),!1;if(Y(P(e))&&(e.name||(e.name=(new Date).getTime()+"."+(P(e)||"image/jpeg").replace(/image\//g,""))),e.size>A.opts.filesManagerMaxSize)return k(Xe,null,null,n),!1;if(A.opts.filesManagerAllowedTypes.indexOf("*")<0&&A.opts.filesManagerAllowedTypes.indexOf(P(e))<0)return k(je,null,null,n),!1;var a;if(function w(e){isNaN(e)||(A.popups.get("filesManager.insert").find(".fr-file-item-right-"+e).get(0).innerHTML='<div class=\'fr-file-item-action-buttons\' >\n    <button type="button" id="fr-file-cancel-upload-button-'.concat(e,'" class="fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n    fr-file-button-').concat(e,' fr-file-cancel-upload-button" data-cmd="cancelUpload" data-title="Cancel" data-param1="').concat(e,'" role="button">\n    <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "-2 3 30 30" xlmns = "http://w3.org/200/svg"><path d = \'M13.4,12l5.6,5.6L17.6,19L12,13.4L6.4,19L5,17.6l5.6-5.6L5,6.4L6.4,5l5.6,5.6L17.6,5L19,6.4L13.4,12z\'></path></svg>\n    </button>\n\n    <button type="button" id="fr-upload-delete-button-').concat(e,'" class="fr-img-icon fr-btn fr-command fr-submit fr-file-action-icons \n    fr-file-button-').concat(e,' fr-upload-delete-button" data-cmd="deleteUpload" data-title="Delete" data-param1="').concat(e,'" role="button">\n    <svg style=\'margin:0px !important; opacity:0.9\' class = "fr-svg" focusable="false" width="16px" height="16px" viewBox = "-2 3 30 30" xlmns = "http://w3.org/200/svg"><path d = \'M15,10v8H9v-8H15 M14,4H9.9l-1,1H6v2h12V5h-3L14,4z M17,8H7v10c0,1.1,0.9,2,2,2h6c1.1,0,2-0.9,2-2V8z\'></path></svg>\n    </button>\n\n    <div class=\'progress-circle p0 fr-file-progress-circle-').concat(e,"'>\n                  <span class='fr-file-upload-percent-").concat(e," fr-file-upload-percent'>0%</span>\n                  <div class='left-half-clipper'>\n                    <div class='first50-bar'></div>\n                    <div class='value-bar'></div>\n                  </div>\n                </div>\n            </div>"),Ue.set(e,0))}(n),A.drag_support.formdata&&(a=A.drag_support.formdata?new FormData:null),a){var r;if(!1!==A.opts.filesManagerUploadToS3)for(r in a.append("key",A.opts.filesManagerUploadToS3.keyStart+(new Date).getTime()+"-"+(e.name||"untitled")),a.append("success_action_status","201"),a.append("X-Requested-With","xhr"),a.append("Content-Type",P(e)),A.opts.filesManagerUploadToS3.params)A.opts.filesManagerUploadToS3.params.hasOwnProperty(r)&&a.append(r,A.opts.filesManagerUploadToS3.params[r]);for(r in A.opts.filesManagerUploadParams)A.opts.filesManagerUploadParams.hasOwnProperty(r)&&a.append(r,A.opts.filesManagerUploadParams[r]);a.append(A.opts.filesManagerUploadParam,e,e.name);var s,o,l=A.opts.filesManagerUploadURL;A.opts.filesManagerUploadToS3&&(l=A.opts.filesManagerUploadToS3.uploadURL?A.opts.filesManagerUploadToS3.uploadURL:"https://".concat(A.opts.filesManagerUploadToS3.region,".amazonaws.com/").concat(A.opts.filesManagerUploadToS3.bucket)),A.opts.filesManagerUploadToAzure&&(l=A.opts.filesManagerUploadToAzure.uploadURL?"".concat(A.opts.filesManagerUploadToAzure.uploadURL,"/").concat(e.name):encodeURI("https://".concat(A.opts.filesManagerUploadToAzure.account,".blob.core.windows.net/").concat(A.opts.filesManagerUploadToAzure.container,"/").concat(e.name)),s=l,A.opts.filesManagerUploadToAzure.SASToken&&(l+=A.opts.filesManagerUploadToAzure.SASToken),A.opts.filesManagerUploadMethod="PUT");var d=A.core.getXHR(l,A.opts.filesManagerUploadMethod);if(A.opts.filesManagerUploadToAzure){var f=(new Date).toUTCString();if(!A.opts.filesManagerUploadToAzure.SASToken&&A.opts.filesManagerUploadToAzure.accessKey){var c=A.opts.filesManagerUploadToAzure.account,p=A.opts.filesManagerUploadToAzure.container;if(A.opts.filesManagerUploadToAzure.uploadURL){var m=A.opts.filesManagerUploadToAzure.uploadURL.split("/");p=m.pop(),c=m.pop().split(".")[0]}var g="x-ms-blob-type:BlockBlob\nx-ms-date:".concat(f,"\nx-ms-version:2019-07-07"),u=encodeURI("/"+c+"/"+p+"/"+e.name),v=A.opts.filesManagerUploadMethod+"\n\n\n"+e.size+"\n\n"+P(e)+"\n\n\n\n\n\n\n"+g+"\n"+u,h=A.cryptoJSPlugin.cryptoJS.HmacSHA256(v,A.cryptoJSPlugin.cryptoJS.enc.Base64.parse(A.opts.filesManagerUploadToAzure.accessKey)).toString(A.cryptoJSPlugin.cryptoJS.enc.Base64),b="SharedKey "+c+":"+h;o=h,d.setRequestHeader("Authorization",b)}for(r in d.setRequestHeader("x-ms-version","2019-07-07"),d.setRequestHeader("x-ms-date",f),d.setRequestHeader("Content-Type",P(e)),d.setRequestHeader("x-ms-blob-type","BlockBlob"),A.opts.filesManagerUploadParams)A.opts.filesManagerUploadParams.hasOwnProperty(r)&&d.setRequestHeader(r,A.opts.filesManagerUploadParams[r]);for(r in A.opts.filesManagerUploadToAzure.params)A.opts.filesManagerUploadToAzure.params.hasOwnProperty(r)&&d.setRequestHeader(r,A.opts.filesManagerUploadToAzure.params[r])}d.onload=function(){W(P(e))?function g(e,t,i,n,a){var r=this.status,s=this.response,o=this.responseXML,l=this.responseText;try{if(A.opts.filesManagerUploadToS3||A.opts.filesManagerUploadToAzure)if(201===r){var d;if(A.opts.filesManagerUploadToAzure){if(!1===A.events.trigger("filesManager.uploadedToAzure",[this.responseURL,a,s],!0))return A.edit.on(),!1;d=n}else d=H(o,t);if(d){var f={link:d,text:e,response:s,type:i};Re.set(t,f)}}else k(Ge,s||o,null,t);else if(200<=r&&r<300){var c=F(l,t);if(c){var p={link:c.link,text:e,response:s,type:i};Re.set(t,p)}}else k(We,s||l,null,t)}catch(m){k(Ge,s||l,null,t)}}.call(d,e.name,n,P(e),s,o):function u(e,t,i,n,a){var r=this.status,s=this.response,o=this.responseXML,l=this.responseText;try{if(A.opts.filesManagerUploadToS3||A.opts.filesManagerUploadToAzure)if(201==r){var d;if(A.opts.filesManagerUploadToAzure){if(!1===A.events.trigger("filesManager.uploadedToAzure",[this.responseURL,a,s],!0))return A.edit.on(),!1;d=n}else d=H(o,t);if(d){var f={link:d,sanitize:!1,data:[],$existing_img:e,response:s||o,type:i};Re.set(t,f)}}else k(Ge,s||o,e,t);else if(200<=r&&r<300){var c=F(l,t);if(c){var p={link:c.link,sanitize:!1,data:c,$existing_img:e,response:s||o,type:i};Re.set(t,p)}}else k(We,s||l,e,t)}catch(m){k(Ge,s||l,e,t)}}.call(d,we,n,P(e),s,o),Oe.has(n)||B(100,n,!0)},d.onerror=function(){k(Ge,this.response||this.responseText||this.responseXML,null,n)},d.upload.onprogress=function(e){!function i(e,t){e.lengthComputable&&B(e.loaded/e.total*100|0,t,!1)}(e,n)},d.onabort=function(e){!function i(e,t){k(qe,t,we,e)}(n,e)},d.send(A.opts.filesManagerUploadToAzure?e:a),De.set(n,d)}}function V(o){A.events.$on(o,"click",".fr-upload-progress-layer",function(e){if(A.helpers.isMobile())return e.stopPropagation(),!1},!0),A.events.$on(o,"dragover dragenter",".fr-upload-progress-layer",function(e){e.preventDefault();for(var t=0;t<e.originalEvent.dataTransfer.types.length;t++)"Files"==e.originalEvent.dataTransfer.types[t]&&(e.originalEvent.dataTransfer.dropEffect="none");return!1},!0),A.events.$on(o,"dragleave dragend",".fr-upload-progress-layer",function(e){return e.preventDefault(),!1},!0),A.events.$on(o,"dragover dragenter",".fr-files-upload-layer",function(e){return Le(this).addClass("fr-drop"),(A.browser.msie||A.browser.edge)&&e.preventDefault(),!1},!0),A.events.$on(o,"dragleave dragend",".fr-files-upload-layer",function(e){return Le(this).removeClass("fr-drop"),(A.browser.msie||A.browser.edge)&&e.preventDefault(),!1},!0),A.events.$on(o,"click",".fr-insert-checkbox",function(){if(this.classList.contains("fr-checkbox-disabled"))return this.children.target.disabled=!0,void(this.children.target.checked=!1);var e=parseInt(this.id.split("-").pop());ze.set(e,this.children.target.checked);for(var t=o.find('.fr-command[data-cmd="insertAll"]'),i=o.find('.fr-command[data-cmd="deleteAll"]'),n=o.find('input.fr-file-insert-check[type="checkbox"]'),a=n.length,r=!0,s=0;s<a;s++)1==n[s].checked&&(r=!1);r?t.addClass("fr-disabled"):t.removeClass("fr-disabled"),r?i.addClass("fr-disabled"):i.removeClass("fr-disabled"),this.children.target.checked?(o.find(".fr-file-"+this.id.split("-").pop()).get(0).setAttribute("draggable","true"),o.find(".fr-file-"+this.id.split("-").pop()).get(0).classList.remove("fr-unchecked")):(this.id.split("-").pop(),o.find(".fr-file-"+this.id.split("-").pop()).get(0).setAttribute("draggable","false"),o.find(".fr-file-"+this.id.split("-").pop()).get(0).classList.add("fr-unchecked"))}),A.events.$on(o,"click",".fr-file-insert-button",function(){this.classList.contains("fr-disabled")||i(parseInt(this.id.split("-").pop()))}),A.events.$on(o,"click",".fr-file-autoplay-button",function(){if(this.parentNode.classList.contains("fr-checkbox-disabled"))return this.disabled=!0,void(this.checked=!1);e(parseInt(this.id.split("-").pop()))}),A.events.$on(o,"click",".fr-file-edit-button",function(){var e=parseInt(this.id.split("-").pop());o.find(".fr-file-edit-button-".concat(e)).hasClass("fr-disabled")||t(e)}),A.events.$on(o,"click",".fr-file-view-button",function(){var e=parseInt(this.id.split("-").pop());o.find(".fr-file-view-button-".concat(e)).hasClass("fr-disabled")||function h(e){if(!j(P(Re.get(e)))){var t=Re.get(e).link,i=Re.get(e).link;if(Be.get(e)&&Be.get(e).name?i=Be.get(e).name:Re.get(e).text&&(i=Re.get(e).text),0===t.indexOf("blob:")&&A.browser.msie&&window.navigator&&window.navigator.msSaveBlob)window.navigator.msSaveBlob(Be.get(e),i);else{var n=document.createElement("a");n.href=t,n.download=i,n.click()}return!1}var a=A.popups.get("filesManager.insert");if(0<a.find(".fr-file-view-image-"+e).length)a.find(".fr-file-view-image-"+e)[0].remove();else{for(var r=a.find(".fr-file-view"),s=0;s<r.length;s++)r.get(s).remove();var o=a.find(".fr-file-view-"+e);if(Y(P(Re.get(e)))){var l='<div class="fr-file-view-modal">\n              <div class="fr-file-view-modal-content">\n              <div class="fr-file-view-close">&times;</div> \n                <img src="'+Re.get(e).link+"\" class ='fr-file-view-image'/>\n                </div>\n              </div>";o[0].innerHTML=l+o[0].innerHTML}else if(G(P(Re.get(e)))){var d;if(Re.get(e).hasOwnProperty("video")){var f=Re.get(e).video.substring(Re.get(e).video.indexOf("src")+3),c=f.substring(f.indexOf('"')+1);c=c.substring(0,c.indexOf('"')),d='<div class="fr-file-view-modal">\n        <div class="fr-file-view-modal-content ">\n          <div class="fr-file-view-close">&times;</div> \n          <iframe width="640" height="360" src="'.concat(c+"&autoplay=1",'" frameborder="0" class = "fr-file-view-image"></iframe>\n        </div>\n      </div>')}else d='<div class="fr-file-view-modal">\n          <div class="fr-file-view-modal-content ">\n            <div class="fr-file-view-close">&times;</div> \n            <video controls src="'+Re.get(e).link+"\"  class ='fr-file-view-image' autoplay></video>\n          </div>\n        </div>";o[0].innerHTML=d+o[0].innerHTML}else if(X(P(Re.get(e)))){var p='<div class="fr-file-view-modal">\n        <div class="fr-file-view-modal-content ">\n          <div  class="fr-file-view-close">&times;</div> \n          <audio controls="controls"  class =\'fr-file-view-image\' autoplay>\n\n          <source src="'.concat(Re.get(e).link,'" type="').concat(P(Re.get(e)),'" />\n\n            Your browser does not support the audio element.\n          </audio>\n        </div>\n      </div>');o[0].innerHTML=p+o[0].innerHTML}else if(W(P(Re.get(e)))){var g=Re.get(e).link,u=Re.get(e).text;if(g.endsWith(".pdf")||g.endsWith(".txt")){var m='<div class="fr-file-view-modal">\t\n              <div class="fr-file-view-modal-content " >\t\n              <div class="fr-file-view-close">&times;</div> \t\n              <iframe src="'.concat(g,"\" style='background-color: white;' height='50%' width='50%' title=\"").concat(u,'" class="fr-file fr-file-view-image"></iframe>\t\n            </div>\t\n            </div>');o[0].innerHTML=m+o[0].innerHTML}else if(0===g.indexOf("blob:")&&A.browser.msie&&window.navigator&&window.navigator.msSaveBlob)window.navigator.msSaveBlob(Be.get(e),u);else{var v=document.createElement("a");v.href=g,v.download=u,v.click()}}}}(e)}),A.events.$on(o,"click",".fr-file-delete-button",function(){h(parseInt(this.id.split("-").pop()))}),A.events.$on(o,"click",".fr-file-cancel-upload-button",function(){!function i(e){var t=A.popups.get("filesManager.insert");t.find(".fr-file-item-right-"+e).get(0).innerHTML=T(e),De.get(e).abort(),R(e,100,!0),t.find(".fr-checkbox-file-"+e).get(0).disabled=!0}(parseInt(this.id.split("-").pop()))}),A.events.$on(o,"click",".fr-upload-delete-button",function(){!function t(e){0!=De.get(e).readyState&&(De.get(e).abort(),R(e,100,!0),De["delete"](e)),h(e)}(parseInt(this.id.split("-").pop()))}),A.events.$on(o,"click",".fr-file-view-close",function(){o.find(".fr-file-view-modal").get(0).outerHTML=""}),A.events.$on(o,"click",".fr-plugins-enable",function(){!function e(){Ke.forEach(function(e){A.opts.pluginsEnabled.indexOf(e)<0&&A.opts.pluginsEnabled.push(e)})}(),function i(e){for(var t in e)if(!A[t]){if(_t.PLUGINS[t]&&A.opts.pluginsEnabled.indexOf(t)<0)continue;A[t]=new e[t](A),A[t]._init&&A[t]._init()}}(_t.PLUGINS),A.popups.get("filesManager.insert").get(0).outerHTML="",q(),f(!0)}),A.events.$on(o,"click",".fr-plugins-cancel",function(){A.popups.hide("filesManager.insert")}),A.events.$on(o,"drop",".fr-upload-progress",function(e){e.preventDefault(),e.stopPropagation()}),A.events.$on(o,"drop",".fr-files-upload-layer",function(e){e.preventDefault(),e.stopPropagation(),Le(this).removeClass("fr-drop");var t=e.originalEvent.dataTransfer;if(t&&t.files){var i=o.data("instance")||A;i.events.disableBlur();for(var n=[],a=0;a<t.files.length;a++){var r=He;Be.set(r,t.files[a]),C(r),ze.set(r,!1),n.push(r),He++}for(var s=0;s<n.length;s++)i.filesManager.upload(Be.get(n[s]),t.files,we,n[s]);i.events.enableBlur()}},!0),A.helpers.isIOS()&&A.events.$on(o,"touchstart",'.fr-files-upload-layer input[type="file"]',function(){Le(this).trigger("click")},!0),A.events.$on(o,"change",'.fr-files-upload-layer input[type="file"]',function(){if(this.files){var e=o.data("instance")||A;e.events.disableBlur(),o.find("input:focus").blur(),e.events.enableBlur();var t=[];if("undefined"!=typeof this.files&&0<this.files.length){for(var i=0;i<this.files.length;i++){var n=He;Be.set(n,this.files[i]),C(n),ze.set(n,!1),++He,t.push(n)}for(var a=0;a<t.length;a++)e.filesManager.upload(Be.get(t[a]),this.files,we,t[a])}}Le(this).val("")},!0)}function e(t){document.getElementById("fr-file-autoplay-button-"+t).checked?Fe.push(t):Fe=Fe.filter(function(e){return e!=t})}function Y(e){return e&&"image"===e.split("/")[0]}function W(e){return e&&"image"!=e.split("/")[0]&&e&&"video"!=e.split("/")[0]&&e&&"audio"!=e.split("/")[0]}function G(e){return e&&"video"===e.split("/")[0]}function X(e){return e&&"audio"===e.split("/")[0]}function j(e
){var t="audio/ogg",i="video/ogg";if(e==t||e==i||"image/webp"==e||"video/webm"==e){if(A.browser.msie||A.browser.edge||A.browser.safari)return!1;if(A.helpers.isMobile()){if(e==t||e==i)return!1;if(!A.helpers.isAndroid()&&!A.browser.chrome)return!1}}return!0}function q(e){if(e)return A.popups.onRefresh("filesManager.insert",g),A.popups.onHide("filesManager.insert",u),!0;var t,i,n="";A.opts.imageUpload||-1===A.opts.filesInsertButtons.indexOf("filesUpload")||A.opts.imageInsertButtons.splice(A.opts.filesInsertButtons.indexOf("filesUpload"),1);var a=A.button.buildList(A.opts.filesInsertButtons),r=A.button.buildList(A.opts.filesInsertButtons2);""!==a&&(n='<div class="fr-buttons fr-tabs">'.concat(a,'<span class="fr-align-right">').concat(r,"</span></div>"));var s=A.opts.filesInsertButtons.indexOf("filesUpload"),o=A.opts.filesInsertButtons.indexOf("filesByURL"),l=A.opts.filesInsertButtons.indexOf("filesEmbed"),d="";0<=s&&(t=" fr-active",0<=o&&o<s&&(t=""),d='<div class="fr-files-upload-layer'.concat(t,' fr-layer " id="fr-files-upload-layer-').concat(A.id,'"><div style="display:flex"><div class="fr-upload-section"><div class = \'fr-blue-decorator\'><div class = \'fr-cloud-icon\'><svg class = "fr-svg" focusable="false" width="26px" height="26px" viewBox = "0 0 24 24" xlmns = "http://w3.org/200/svg"><path d = \'M12 6.66667a4.87654 4.87654 0 0 1 4.77525 3.92342l0.29618 1.50268 1.52794 0.10578a2.57021 2.57021 0 0 1 -0.1827 5.13478H6.5a3.49774 3.49774 0 0 1 -0.3844 -6.97454l1.06682 -0.11341L7.678 9.29387A4.86024 4.86024 0 0 1 12 6.66667m0 -2A6.871 6.871 0 0 0 5.90417 8.37 5.49773 5.49773 0 0 0 6.5 19.33333H18.41667a4.57019 4.57019 0 0 0 0.32083 -9.13A6.86567 6.86567 0 0 0 12 4.66667Zm0.99976 7.2469h1.91406L11.99976 9 9.08618 11.91357h1.91358v3H11V16h2V14h-0.00024Z\'></path></svg></div>Drag & Drop One or More Files<br><div class="decorated"><span> OR </span></div> Click Browse Files </div> </div><div class="fr-form"><input type="file" accept="').concat(A.opts.filesManagerAllowedTypes.join(",").toLowerCase(),'" tabIndex="-1" aria - labelledby="fr-files-upload-layer-').concat(A.id,'"role="button" multiple></div> </div></div>'));var f="";0<=l&&(t=" fr-active",(s<l&&0<=s||o<l&&0<=o)&&(t=""),f='<div class="fr-files-embed-layer fr-layer'.concat(t,'" id="fr-files-embed-layer-').concat(A.id,'"><div class="fr-input-line padding-top-15"><textarea data-gramm_editor="false" style=\'height:60px\' id="fr-files-embed-layer-text').concat(A.id,'" type="text" placeholder="').concat(A.language.translate("Embedded Code"),'" tabIndex="1" aria-required="true" rows="5"></textarea></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="insertEmbed" tabIndex="2" role="button">').concat(A.language.translate("Insert"),"</button></div></div>"));var c="";0<=o&&(t=" fr-active",0<=s&&s<o&&(t=""),c='<div class="fr-files-by-url-layer'.concat(t,' fr-layer" id="fr-files-by-url-layer-').concat(A.id,'"><div class="fr-input-line fr-by-url-padding"><input id="fr-files-by-url-layer-text-').concat(A.id,'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="filesInsertByURL" tabIndex="2" role="button">').concat(A.language.translate("Add"),"</button></div></div>"));var p={buttons:n,upload_layer:d,by_url_layer:c,embed_layer:f,upload_progress_layer:"<div class = ' fr-margin-16 fr-upload-progress' id=\"fr-upload-progress-layer-".concat(A.id,"\" ><div  class='fr-progress-bar-style'><div class='fr-progress-bar fr-none'></div></div><div id='filesList' class = 'fr-upload-progress-layer fr-layer'></div></div>"),progress_bar:'<div class="fr-files-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="filesDismissError" tabIndex="2" role="button">OK</button></div></div>'};return 1<=A.opts.imageInsertButtons.length&&(i=A.popups.create("filesManager.insert",p)),A.$wp&&A.events.$on(A.$wp,"scroll",function(){we&&A.popups.isVisible("filesManager.insert")&&replace()}),V(i),A.popups.setPopupDimensions(i),i}function Z(e){var t=e.split("/").pop();if(t.split(".").length<2){var i=new Date;return t+"-"+i.getDate()+"/"+(i.getMonth()+1)+"/"+i.getFullYear()}return t}function J(){we&&A.popups.get("image.alt").find("input").val(we.attr("alt")||"").trigger("change")}function Q(){var e=A.popups.get("image.alt");e||(e=ee()),w(),A.popups.refresh("image.alt"),A.popups.setContainer("image.alt",A.$sc);var t=be();ye()&&(t=t.find(".fr-img-wrap"));var i=t.offset().left+t.outerWidth()/2,n=t.offset().top+t.outerHeight();A.popups.show("image.alt",i,n,t.outerHeight(),!0)}function ee(e){if(e)return A.popups.onRefresh("image.alt",J),!0;var t={buttons:'<div class="fr-buttons fr-tabs">'.concat(A.button.buildList(A.opts.imageAltButtons),"</div>"),alt_layer:'<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'.concat(A.id,'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-').concat(A.id,'" type="text" placeholder="').concat(A.language.translate("Alternative Text"),'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">').concat(A.language.translate("Update"),"</button></div></div>")},i=A.popups.create("image.alt",t);return A.$wp&&A.events.$on(A.$wp,"scroll.image-alt",function(){we&&A.popups.isVisible("image.alt")&&Q()}),i}function te(){var e=A.popups.get("image.size");if(we)if(ye()){var t=we.parent();t.get(0).style.width||(t=we.parent().parent()),e.find('input[name="width"]').val(t.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(t.get(0).style.height).trigger("change")}else e.find('input[name="width"]').val(we.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(we.get(0).style.height).trigger("change")}function ie(){var e=A.popups.get("image.size");e||(e=ne()),w(),A.popups.refresh("image.size"),A.popups.setContainer("image.size",A.$sc);var t=be();ye()&&(t=t.find(".fr-img-wrap"));var i=t.offset().left+t.outerWidth()/2,n=t.offset().top+t.outerHeight();A.popups.show("image.size",i,n,t.outerHeight(),!0)}function ne(e){if(e)return A.popups.onRefresh("image.size",te),!0;var t={buttons:'<div class="fr-buttons fr-tabs">'.concat(A.button.buildList(A.opts.imageSizeButtons),"</div>"),size_layer:'<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'.concat(A.id,'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-\'').concat(A.id,'" type="text" name="width" placeholder="').concat(A.language.translate("Width"),'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height').concat(A.id,'" type="text" name="height" placeholder="').concat(A.language.translate("Height"),'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">').concat(A.language.translate("Update"),"</button></div></div>")},i=A.popups.create("image.size",t);return A.$wp&&A.events.$on(A.$wp,"scroll.image-size",function(){we&&A.popups.isVisible("image.size")&&ie()}),i}function ae(e,t,i,n){return e.pageX=t,p.call(this,e),e.pageX=e.pageX+i*Math.floor(Math.pow(1.1,n)),m.call(this,e),v.call(this,e),++n}function re(e){(e=e||be())&&!1!==A.events.trigger("image.beforeRemove",[e])&&(A.popups.hideAll(),ge(!0),A.undo.canDo()||A.undo.saveStep(),e.get(0)==A.el?e.removeAttr("src"):(e.get(0).parentNode&&"A"==e.get(0).parentNode.tagName?(A.selection.setBefore(e.get(0).parentNode)||A.selection.setAfter(e.get(0).parentNode)||e.parent().after(_t.MARKERS),Le(e.get(0).parentNode).remove()):(A.selection.setBefore(e.get(0))||A.selection.setAfter(e.get(0))||e.after(_t.MARKERS),e.remove()),A.html.fillEmptyBlocks(),A.selection.restore()),A.undo.saveStep())}function se(e){var t=e.which;if(we&&(t==_t.KEYCODE.BACKSPACE||t==_t.KEYCODE.DELETE))return e.preventDefault(),e.stopPropagation(),re(),!1;if(we&&t==_t.KEYCODE.ESC){var i=we;return ge(!0),A.selection.setAfter(i.get(0)),A.selection.restore(),e.preventDefault(),!1}if(!we||t!=_t.KEYCODE.ARROW_LEFT&&t!=_t.KEYCODE.ARROW_RIGHT)return we&&t===_t.KEYCODE.TAB?(e.preventDefault(),e.stopPropagation(),ge(!0),!1):we&&t!=_t.KEYCODE.F10&&!A.keys.isBrowserAction(e)?(e.preventDefault(),e.stopPropagation(),!1):void 0;var n=we.get(0);return ge(!0),t==_t.KEYCODE.ARROW_LEFT?A.selection.setBefore(n):A.selection.setAfter(n),A.selection.restore(),e.preventDefault(),!1}function oe(e){if(e&&"IMG"==e.tagName){if(A.node.hasClass(e,"fr-uploading")||A.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):A.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable"),e.parentNode&&e.parentNode.parentNode&&A.node.hasClass(e.parentNode.parentNode,"fr-img-caption")){var t=e.parentNode.parentNode;t.removeAttribute("contenteditable"),t.removeAttribute("draggable"),t.classList.remove("fr-draggable");var i=e.nextSibling;i&&i.removeAttribute("contenteditable")}}else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var n=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),a=0;a<n.length;a++)oe(n[a])}function le(e){if(!1===A.events.trigger("image.beforePasteUpload",[e]))return!1;we=Le(e),l(),replace(),y(),we.on("load",function(){var t=[];l(),Le(A.popups.get("filesManager.insert").get(0)).find("div.fr-active.fr-error").length<1&&y(),Le(this).data("events").find(function(e){"load"===e[0]&&t.push(e)}),t.length<=1&&Le(this).off("load")});for(var t=Le(e).attr("src").split(","),i=atob(t[1]),n=[],a=0;a<i.length;a++)n.push(i.charCodeAt(a));K([new Blob([new Uint8Array(n)],{type:t[0].replace(/data\:/g,"").replace(/;base64/g,"")})],we)}function de(){A.opts.imagePaste?A.$el.find("img[data-fr-image-pasted]").each(function(e,n){if(A.opts.imagePasteProcess){var t=A.opts.imageDefaultWidth;t&&"auto"!=t&&(t+=A.opts.imageResizeWithPercent?"%":"px"),Le(n).css("width",t).removeClass("fr-dii fr-dib fr-fir fr-fil"),ve(Le(n),A.opts.imageDefaultDisplay,A.opts.imageDefaultAlign)}if(0===n.src.indexOf("data:"))le(n);else if(0===n.src.indexOf("blob:")||0===n.src.indexOf("http")&&A.opts.imageUploadRemoteUrls&&A.opts.imageCORSProxy){var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){var e,t=A.o_doc.createElement("CANVAS"),i=t.getContext("2d");t.height=this.naturalHeight,t.width=this.naturalWidth,i.drawImage(this,0,0),setTimeout(function(){le(n)},0),e=2e3<this.naturalWidth||1500<this.naturalHeight?"jpeg":"png",n.src=t.toDataURL("image/".concat(e))},i.src=(0===n.src.indexOf("blob:")?"":"".concat(A.opts.imageCORSProxy,"/"))+n.src}else 0!==n.src.indexOf("http")||0===n.src.indexOf("https://mail.google.com/mail")?(A.selection.save(),Le(n).remove(),A.selection.restore()):Le(n).removeAttr("data-fr-image-pasted")}):A.$el.find("img[data-fr-image-pasted]").remove()}function fe(e){var t=e.target.result,i=A.opts.imageDefaultWidth;i&&"auto"!=i&&(i+=A.opts.imageResizeWithPercent?"%":"px"),A.undo.saveStep(),A.html.insert('<img data-fr-image-pasted="true" src="'.concat(t,'"').concat(i?' style="width: '.concat(i,';"'):"",">"));var n=A.$el.find('img[data-fr-image-pasted="true"]');n&&ve(n,A.opts.imageDefaultDisplay,A.opts.imageDefaultAlign),A.events.trigger("paste.after")}function ce(e){if(e&&e.clipboardData&&e.clipboardData.items){var t=null;if(e.clipboardData.types&&-1!=[].indexOf.call(e.clipboardData.types,"text/rtf")||e.clipboardData.getData("text/rtf"))t=e.clipboardData.items[0].getAsFile();else for(var i=0;i<e.clipboardData.items.length&&!(t=e.clipboardData.items[i].getAsFile());i++);if(t)return function n(e){var t=new FileReader;t.onload=fe,t.readAsDataURL(e)}(t),!1}}function pe(e){return e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function ge(e){we&&(function t(){return ft}()||!0===e)&&(A.toolbar.enable(),Ee&&Ee.removeClass("fr-active"),A.popups.hide("image.edit"),we=null,me(),Ce=null,Ae&&Ae.hide())}function ue(){ft=!0}function me(){ft=!1}function ve(e,t,i){!A.opts.htmlUntouched&&A.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),i&&e.addClass("fr-fi".concat(i[0])),t&&e.addClass("fr-di".concat(t[0]))):"inline"==t?(e.css({display:"inline-block",verticalAlign:"bottom",margin:A.opts.imageDefaultMargin}),"center"==i?e.css({"float":"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - ".concat(2*A.opts.imageDefaultMargin,"px)"),textAlign:"center"}):"left"==i?e.css({"float":"left",marginLeft:0,maxWidth:"calc(100% - ".concat(A.opts.imageDefaultMargin,"px)"),textAlign:"left"}):e.css({"float":"right",marginRight:0,maxWidth:"calc(100% - ".concat(A.opts.imageDefaultMargin,"px)"),textAlign:"right"})):"block"==t&&(e.css({display:"block","float":"none",verticalAlign:"top",margin:"".concat(A.opts.imageDefaultMargin,"px auto"),textAlign:"center"}),"left"==i?e.css({marginLeft:0,textAlign:"left"}):"right"==i&&e.css({marginRight:0,textAlign:"right"}))}function he(){return we}function be(){return ye()?we.parents(".fr-img-caption").first():we}function ye(){return!!we&&0<we.parents(".fr-img-caption").length}var we,xe,Me,Ee,Ce,Ae,ke,Ie,Le=A.$,_e="https://i.froala.com/upload",Se=!1,Te=!1,Be=new Map,Re=new Map,De=new Map,Ue=new Map,ze=new Map,Oe=new Map,$e=0,Pe=[],Ne=-1,Fe=[],He=0,Ke=["file","image","imageTUI","video"],Ve=1,Ye=2,We=3,Ge=4,Xe=5,je=6,qe=10,Ze=["video/avi","video/mpeg","video/x-ms-wmv"],Je={};Je[Ve]="File cannot be loaded from the passed link.",Je[Ye]="No link in upload response.",Je[We]="Error during file upload.",Je[Ge]="Parsing response failed.",Je[Xe]="File is too large.",Je[je]="File type is invalid.",Je[7]="Files can be uploaded only to same domain in IE 8 and IE 9.",Je[8]="File is corrupted.",Je[9]="Error during file loading.",Je[qe]="File upload cancelled";var Qe,et,tt,it,nt,at,rt,st,ot,lt,dt="",ft=!1;return{_init:function ct(){var n;(function e(){A.helpers.isMobile()&&A.events.$on(Le(A.o_win),"orientationchange",function(){setTimeout(function(){f(!0)},100)}),A.events.$on(A.$el,A._mousedown,"IMG"==A.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==Le(this).parents("contenteditable").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;A.helpers.isMobile()||A.selection.clear(),Te=!0,A.popups.areVisible()&&A.events.disableBlur(),A.browser.msie&&(A.events.disableBlur(),A.$el.attr("contenteditable",!1)),A.draggable||"touchstart"==e.type||e.preventDefault(),e.stopPropagation()}),A.events.$on(A.$el,A._mousedown,".fr-img-caption .fr-inner",function(e){A.core.hasFocus()||A.events.focus(),e.stopPropagation()}),A.events.$on(A.$el,"paste",".fr-img-caption .fr-inner",function(e){A.toolbar.hide(),e.stopPropagation()}),A.events.$on(A.$el,A._mouseup,"IMG"==A.el.tagName?null:'img:not([contenteditable="false"])',function(e){if("false"==Le(this).parents("contenteditable").not(".fr-element").not(".fr-img-caption").not("body").first().attr("contenteditable"))return!0;Te&&(Te=!1,e.stopPropagation(),A.browser.msie&&(A.$el.attr("contenteditable",!0),A.events.enableBlur()))}),A.events.on("keyup",function(e){if(e.shiftKey&&""===A.selection.text().replace(/\n/g,"")&&A.keys.isArrow(e.which)){var t=A.selection.element(),i=A.selection.endElement();t&&"IMG"==t.tagName?U(Le(t)):i&&"IMG"==i.tagName&&U(Le(i))}},!0),A.events.on("window.mousedown",ue),A.events.on("window.touchmove",me),A.events.on("mouseup window.mouseup",function(){if(we)return ge(),!1;me()}),A.events.on("commands.mousedown",function(e){0<e.parents(".fr-toolbar").length&&ge()}),A.events.on("image.resizeEnd",function(){A.opts.iframe&&A.size.syncIframe()}),A.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){ge(!(Te=!1))}),A.events.on("modals.hide",function(){we&&A.selection.clear()}),A.events.on("image.resizeEnd",function(){A.win.getSelection&&U(we)}),A.opts.imageAddNewLine&&A.events.on("image.inserted",function(e){var t=e.get(0);for(t.nextSibling&&"BR"===t.nextSibling.tagName&&(t=t.nextSibling);t&&!A.node.isElement(t);)t=A.node.isLastSibling(t)?t.parentNode:null;A.node.isElement(t)&&(A.opts.enter===_t.ENTER_BR?e.after("<br>"):Le(A.node.blockParent(e.get(0))).after("<".concat(A.html.defaultTag(),"><br></").concat(A.html.defaultTag(),">")))})})(),"IMG"==A.el.tagName&&A.$el.addClass("fr-view"),A.helpers.isMobile()&&(A.events.$on(A.$el,"touchstart","IMG"==A.el.tagName?null:'img:not([contenteditable="false"])',function(){lt=!1}),A.events.$on(A.$el,"touchmove",function(){lt=!0})),A.$wp?(A.events.on("window.keydown keydown",se,!0),A.events.on("keyup",function(e){if(we&&e.which==_t.KEYCODE.ENTER)return!1},!0),A.events.$on(A.$el,"keydown",function(){var e=A.selection.element();(e.nodeType===Node.TEXT_NODE||"BR"==e.tagName&&A.node.isLastSibling(e))&&(e=e.parentNode),A.node.hasClass(e,"fr-inner")||(A.node.hasClass(e,"fr-img-caption")||(e=Le(e).parents(".fr-img-caption").get(0)),A.node.hasClass(e,"fr-img-caption")&&(Le(e).after(_t.INVISIBLE_SPACE+_t.MARKERS),A.selection.restore()))})):A.events.$on(A.$win,"keydown",se),A.events.on("toolbar.esc",function(){if(we){if(A.$wp)A.events.disableBlur(),A.events.focus();else{var e=we;ge(!0),A.selection.setAfter(e.get(0)),A.selection.restore()}return!1}},!0),A.events.on("toolbar.focusEditor",function(){if(we)return!1},!0),A.events.on("window.cut window.copy",function(e){if(we&&A.popups.isVisible("image.edit")&&!A.popups.get("image.edit").find(":focus").length){var t=be();ye()?(t.before(_t.START_MARKER),t.after(_t.END_MARKER),A.selection.restore(),A.paste.saveCopiedText(t.get(0).outerHTML,t.text())):A.paste.saveCopiedText(we.get(0).outerHTML,we.attr("alt")),"copy"==e.type?setTimeout(function(){U(we)}):(ge(!0),A.undo.saveStep(),setTimeout(function(){A.undo.saveStep()},0))}},!0),A.browser.msie&&A.events.on("keydown",function(e){if(!A.selection.isCollapsed()||!we)return!0;var t=e.which;t==_t.KEYCODE.C&&A.keys.ctrlKey(e)?A.events.trigger("window.copy"):t==_t.KEYCODE.X&&A.keys.ctrlKey(e)&&A.events.trigger("window.cut")}),A.events.$on(Le(A.o_win),"keydown",function(e){var t=e.which;if(we&&t==_t.KEYCODE.BACKSPACE)return e.preventDefault(),!1}),A.events.$on(A.$win,"keydown",function(e){var t=e.which;we&&we.hasClass("fr-uploading")&&t==_t.KEYCODE.ESC&&we.trigger("abortUpload")}),A.events.on("destroy",function(){we&&we.hasClass("fr-uploading")&&we.trigger("abortUpload")}),A.events.on("paste.before",ce),A.events.on("paste.beforeCleanup",pe),A.events.on("paste.after",de),A.events.on("html.processGet",oe),A.opts.imageOutputSize&&A.events.on("html.beforeGet",function(){n=A.el.querySelectorAll("img");for(var e=0;e<n.length;e++){var t=n[e].style.width||Le(n[e]).width(),i=n[e].style.height||Le(n[e]).height();t&&n[e].setAttribute("width","".concat(t).replace(/px/,"")),i&&n[e].setAttribute("height","".concat(i).replace(/px/,""))}}),A.opts.iframe&&A.events.on("image.loaded",A.size.syncIframe),A.events.$on(Le(A.o_win),"orientationchange.image",function(){setTimeout(function(){we&&U(we)},100)}),function a(e){if(e)return A.$wp&&A.events.$on(A.$wp,"scroll.image-edit",function(){we&&A.popups.isVisible("image.edit")&&A.events.disableBlur()}),!0;var t="";if(0<A.opts.imageEditButtons.length){var i={buttons:t+='<div class="fr-buttons"> \n        '.concat(A.button.buildList(A.opts.imageEditButtons),"\n        </div>")};return A.popups.create("image.edit",i)}return!1}(!0),q(!0),ne(!0),ee(!0),A.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return re(e),!1}),A.events.on("popups.hide.filesManager.insert",function(){A.filesManager.minimizePopup(Me)})},showInsertPopup:f,showLayer:function pt(e){var t,i,n=A.popups.get("filesManager.insert");if(we||A.opts.toolbarInline){if(we){var a=be();ye()&&(a=a.find(".fr-img-wrap")),i=a.offset().top+a.outerHeight(),t=a.offset().left}}else{var r=A.$tb.find('.fr-command[data-cmd="insertFiles"]');t=r.offset().left,i=r.offset().top+(A.opts.toolbarBottom?10:r.outerHeight()-10)}!we&&A.opts.toolbarInline&&(i=n.offset().top-A.helpers.getPX(n.css("margin-top")),n.hasClass("fr-above")&&(i+=n.outerHeight())),n.find(".fr-layer").removeClass("fr-active"),n.find(".fr-".concat(e,"-layer")).addClass("fr-active"),n.find(".fr-upload-progress-layer").addClass("fr-active"),A.popups.show("filesManager.insert",t,i,we?we.outerHeight():0),A.accessibility.focusPopup(n)},refreshUploadButton:function gt(e){var t=A.popups.get("filesManager.insert");t&&t.find(".fr-files-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},refreshByURLButton:function ut(e){var t=A.popups.get("filesManager.insert");t&&t.find(".fr-files-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},upload:K,insertByURL:function mt(){for(var e,t=A.popups.get("filesManager.insert").find(".fr-files-by-url-layer input"),i=t.val().trim().split(/[ ,]+/),n=[],a=0,r=0;r<i.length;r++)e=i[r],new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)&&(n[a]=i[r],a++);if(0!=n.length){if(0<t.val().trim().length&&0<n.length){var o=[],l=[],d=He,f=n.length;n.forEach(function(e,i){if(0==e.trim().length)He==d+--f&&D(o,l);else{w(),y(),L(A.language.translate("Loading file(s)"));var n=e.trim(),t=function s(e){if(void 0===e)return e;var t=null;if(/^http/.test(e)||(e="https://".concat(e)),A.helpers.isURL(e))for(var i=0;i<_t.VIDEO_PROVIDERS.length;i++){var n=_t.VIDEO_PROVIDERS[i];if(n.test_regex.test(e)&&new RegExp(A.opts.videoAllowedProviders.join("|")).test(n.provider)){t=e.replace(n.url_regex,n.url_text),t=n.html.replace(/\{url\}/,t);break}}return t}(n);if(t){var a={link:n,name:n,type:"video/url",size:2,video:t};Be.set(d+i,a),C(d+i),w(),y(),L(A.language.translate("Loading file(s)")),Re.set(d+i,a),++He==d+f&&D(o,l)}else{var r=new XMLHttpRequest;r.onload=function(){if(200==this.status){var e=new Blob([this.response],{type:this.response.type||""});e.name=Z(n),e.link=n,Y(this.response.type)?(e.sanitize=!0,e.existing_image=we):W(this.response.type)&&(e.text=Z(n)),o.push(e),l.push(d+i),Be.set(d+i,e),C(d+i),(-1<Ze.indexOf(P(e))||!P(e))&&k(je,null,null,d+i)}else{var t=new Blob([this.response],{type:this.response.type||" "});t.name=Z(n),t.link=n,Be.set(d+i,t),C(d+i),k(Ve,this.response,we,d+i)}w(),y(),L(A.language.translate("Loading file(s)")),++He==d+f&&D(o,l)},r.onerror=function(){var e={link:n,name:Z(n),size:0,type:""};k(9,this.response,we,d+i);var t=He;Be.set(t,e),C(t),w(),y(),L(A.language.translate("Loading file(s)")),++He==d+f&&D(o,l)},r.open("GET","".concat(A.opts.imageCORSProxy,"/").concat(n),!0),r.responseType="blob",r.send()}}}),t.val(""),t.blur()}}else s(A.language.translate("Url entered is invalid. Please try again."))},insertAllFiles:function vt(){Pe=[];var e=A.popups.get("filesManager.insert");Ne=-1,Ie=null,e.find(".fr-insert-checkbox").toArray().forEach(function i(e,t){e.children.target.checked&&(Pe.push(parseInt(e.id.split("-").pop())),Y(Re.get(parseInt(e.id.split("-").pop())).type)&&-1==Ne&&(Ne=t))}),$(Pe),I()},deleteAllFiles:function ht(){A.popups.get("filesManager.insert").find(".fr-insert-checkbox").toArray().forEach(function i(e){if(e.children.target.checked){var t=parseInt(e.id.split("-").pop());De.has(t)&&De["delete"](t),h(t)}}),I()},get:he,getEl:be,insert:i,showProgressBar:y,remove:re,hideProgressBar:w,applyStyle:function bt(e,t,i){if(void 0===t&&(t=A.opts.imageStyles),void 0===i&&(i=A.opts.imageMultipleStyles),!we)return!1;var n=be();if(!i){var a=Object.keys(t);a.splice(a.indexOf(e),1),n.removeClass(a.join(" "))}"object"==St(t[e])?(n.removeAttr("style"),n.css(t[e].style)):n.toggleClass(e),U(we)},showAltPopup:Q,showSizePopup:ie,setAlt:function yt(e){if(we){var t=A.popups.get("image.alt");we.attr("alt",e||t.find("input").val()||""),t.find("input:focus").blur(),U(we)}},setSize:function wt(e,t){if(we){var i=A.popups.get("image.size");e=e||i.find('input[name="width"]').val()||"",t=t||i.find('input[name="height"]').val()||"";var n=/^[\d]+((px)|%)*$/g;we.removeAttr("width").removeAttr("height"),e.match(n)?we.css("width",e):we.css("width",""),t.match(n)?we.css("height",t):we.css("height",""),ye()&&(we.parents(".fr-img-caption").removeAttr("width").removeAttr("height"),e.match(n)?we.parents(".fr-img-caption").css("width",e):we.parents(".fr-img-caption").css("width",""),t.match(n)?we.parents(".fr-img-caption").css("height",t):we.parents(".fr-img-caption").css("height","")),i&&i.find("input:focus").blur(),U(we)}},toggleCaption:function xt(){var e;if(we&&!ye()){(e=we).parent().is("a")&&(e=we.parent());var t,i,n=we.parents("ul")&&0<we.parents("ul").length?we.parents("ul"):we.parents("ol")&&0<we.parents("ol").length?we.parents("ol"):[];if(0<n.length){var a=n.find("li").length,r=we.parents("li"),s=document.createElement("li");a-1===r.index()&&(n.append(s),s.innerHTML="&nbsp;")}e.attr("style")&&(i=-1<(t=e.attr("style").split(":")).indexOf("width")?t[t.indexOf("width")+1].replace(";",""):"");var o=A.opts.imageResizeWithPercent?(-1<i.indexOf("px")?null:i)||"100%":we.width()+"px";e.wrap('<div class="fr-img-space-wrap"><span '+(A.browser.mozilla?"":'contenteditable="false"')+'class="fr-img-caption '+we.attr("class")+'" style="'+(A.opts.useClasses?"":e.attr("style"))+'" draggable="false"></span><p class="fr-img-space-wrap2">&nbsp;</p></div>'),e.wrap('<span class="fr-img-wrap"></span>'),we.after('<span class="fr-inner"'.concat(A.browser.mozilla?"":' contenteditable="true"',">").concat(_t.START_MARKER).concat(A.language.translate("Image Caption")).concat(_t.END_MARKER,"</span>")),we.removeAttr("class").removeAttr("style").removeAttr("width"),we.parents(".fr-img-caption").css("width",o),ge(!0),A.selection.restore()}else e=be(),we.insertAfter(e),we.attr("class",e.attr("class").replace("fr-img-caption","")).attr("style",e.attr("style")),e.remove(),U(we)},refreshEmbedButton:function Mt(e){var t=A.popups.get("filesManager.insert");t&&t.find(".fr-files-embed-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)},insertEmbed:function Et(e){void 0===e&&(e=A.popups.get("filesManager.insert").find(".fr-files-embed-layer textarea").val()||""),0===e.length||!_t.VIDEO_EMBED_REGEX.test(e)&&!_t.IMAGE_EMBED_REGEX.test(e)?(s(A.language.translate("Something went wrong. Please try again.")),_t.VIDEO_EMBED_REGEX.test(e)&&A.events.trigger("video.codeError",[e])):N(e)},hasCaption:ye,exitEdit:ge,edit:U,cancelFileInsert:function Ct(){this.file_manager_dialog_open=!1,De.forEach(function(e,t){4!=e.readyState&&(e.abort(),h(t))});var e=A.popups.get("filesManager.insert");e.find(".fr-progress-bar").removeClass("fr-display-block").addClass("fr-none"),e.find('.fr-command[data-cmd="filesUpload"]').removeClass("fr-disabled"),e.find('.fr-command[data-cmd="filesByURL"]').removeClass("fr-disabled"),e.find('.fr-command[data-cmd="filesEmbed"]').removeClass("fr-disabled"),$e=0,De=new Map,Ue=new Map,b(),A.popups.hide("filesManager.insert")},minimizePopup:function At(){this.file_manager_dialog_open=!1,A.popups.hide("filesManager.insert"),b()},editImage:t,saveImage:function kt(e){var t=Re.get(xe);t.link=window.URL.createObjectURL(new Blob(e,{type:"image/png"})),Re.set(xe,t)},_showErrorMessage:s,_showFileErrorMessage:r,getFileThumbnail:S,deleteFile:h,checkAutoplay:e,checkInsertAllState:I,_disableInsertCheckbox:a,_getFileType:P,isChildWindowOpen:function It(){return Se},setChildWindowState:function Lt(e){e!==undefined&&(Se=e)},resetAllFilesCheckbox:b}},_t.DefineIcon("insertFiles",{NAME:"image",SVG_KEY:"fileManager"}),_t.RegisterShortcut(_t.KEYCODE.P,"insertFiles",null,"P"),_t.RegisterCommand("insertFiles",{title:"Insert Files",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("filesManager.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("filesManager.insert")):this.filesManager.showInsertPopup()},plugin:"filesManager"}),_t.DefineIcon("cloudIcon",{NAME:"cloudIcon",SVG_KEY:"uploadFiles"}),_t.DefineIcon("filesUpload",{NAME:"uploadFiles",SVG_KEY:"uploadFiles"}),_t.RegisterCommand("filesUpload",{title:"Upload Files",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.showLayer("files-upload")},refresh:function(e){this.filesManager.refreshUploadButton(e)}}),_t.DefineIcon("filesByURL",{NAME:"link",SVG_KEY:"insertLink"}),_t.RegisterCommand("filesByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.showLayer("files-by-url")},refresh:function(e){this.filesManager.refreshByURLButton(e)}}),_t.DefineIcon("filesEmbed",{NAME:"code",SVG_KEY:"codeView"}),_t.RegisterCommand("filesEmbed",{title:"Embedded Code",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.showLayer("files-embed")},refresh:function(e){this.filesManager.refreshEmbedButton(e)}}),_t.DefineIcon("insertAll",{NAME:"insertAll",SVG_KEY:"fileInsert"}),_t.RegisterCommand("insertAll",{title:"Insert",undo:!1,focus:!1,toggle:!0,disabled:!0,callback:function(){this.filesManager.insertAllFiles()}}),_t.DefineIcon("deleteAll",{NAME:"remove",SVG_KEY:"remove"}),_t.RegisterCommand("deleteAll",{title:"Delete",undo:!1,focus:!1,toggle:!0,disabled:!0,callback:function(){this.filesManager.deleteAllFiles()}}),_t.DefineIcon("cancel",{NAME:"cancel",SVG_KEY:"cancel"}),_t.RegisterCommand("cancel",{title:"Cancel",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.cancelFileInsert()},refresh:function(){}}),_t.DefineIcon("minimize",{NAME:"minimize",SVG_KEY:"minimize"}),_t.RegisterCommand("minimize",{title:"Minimize",undo:!1,focus:!1,toggle:!0,callback:function(){this.filesManager.minimizePopup("image.insert",!0)},refresh:function(e){this.filesManager.refreshEmbedButton(e)}}),_t.RegisterCommand("filesInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.filesManager.insertByURL()},refresh:function(e){e.text(this.language.translate("Add"))}}),_t.RegisterCommand("imageInsertByUpload",{title:"Insert",undo:!0,refreshAfterCallback:!1,callback:function(){},refresh:function(){}}),_t.RegisterCommand("viewImage",{title:"View Image",undo:!0,refreshAfterCallback:!1,callback:function(){},refresh:function(){}}),_t.RegisterCommand("insertEmbed",{undo:!0,focus:!0,callback:function(){this.filesManager.insertEmbed(),this.popups.get("filesManager.insert").find("textarea")[0].value="",this.popups.get("filesManager.insert").find("textarea").removeClass("fr-not-empty")}}),_t.RegisterCommand("filesDismissError",{title:"OK",undo:!1,callback:function(){this.filesManager.hideProgressBar(!0)}})});